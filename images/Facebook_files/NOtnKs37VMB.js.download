;/*FB_PKG_DELIM*/

__d("ComponentMountUnmountSubspanLogger.react",["InteractionTracingMetrics","hero-tracing-placeholder","performanceNow","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useContext,k=b.useEffect;function a(a){var b=a.description,e=j(d("hero-tracing-placeholder").HeroInteractionIDContext);k(function(){var a=(h||(h=c("performanceNow")))();return function(){if(e!=null){var d=(h||(h=c("performanceNow")))();c("InteractionTracingMetrics").addSubspan(e,b,"AppTiming",a,d,{})}}},[b,e])}g["default"]=a}),98);
__d("FaceHappyFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx("path",{d:"M458.508 1078.5a1 1 0 1 1-.015-2.002 1 1 0 0 1 .015 2.002m-.037 1.668c-.324.91-1.273 1.832-2.46 1.832h-.002c-1.2 0-2.157-.922-2.48-1.832a.5.5 0 1 1 .942-.335c.204.573.835 1.167 1.538 1.167h.001c.692 0 1.315-.593 1.519-1.168a.5.5 0 0 1 .942.335m-5.971-2.667a1 1 0 1 1 2 0 1 1 0 0 1-2 0m3.5-3.5a5.506 5.506 0 0 0-5.5 5.5c0 3.033 2.467 5.5 5.5 5.5s5.5-2.467 5.5-5.5-2.467-5.5-5.5-5.5"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("LSCommunityPublicGroupParticipationApprovalStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({CAN_PARTICIPATE:1,PARTICIPATION_REQUEST_REQUIRED:2,PARTICIPATION_REQUEST_PENDING:3});f["default"]=a}),66);
__d("LSFetchAdditionalThreadData",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[1]=d[0].get("thread_key"),d[0],d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),["fetch_additional_thread_data","_",c.i64.to_string(d[1])].join(""),c.i64.cast([0,733]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSFetchAdditionalThreadDataStoredProcedure",["LSFetchAdditionalThreadData","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;return c("LSFetchAdditionalThreadData").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSFetchProactiveWarningsIfNeeded",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[5]=b.syncGroup,c.i64.neq(d[5],void 0)?d[4]=d[5]:d[4]=c.i64.cast([0,1]),d[0]=d[4])})},function(e){return c.db.table(183).fetch([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(b){return c.db.table(183).put({threadKey:a[0],suspectId:a[0]})},function(e){return d[4]=new c.Map(),d[4].set("thread_key",a[0]),d[4].set("sync_group",d[0]),d[5]=c.toJSON(d[4]),c.storedProcedure(b("LSIssueNewTask"),"proactive_warnings_fetch_queue",c.i64.cast([0,192]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[2]=c.i64.cast([0,1])}]):(f=e.item,c.sequence([function(e){return d[5]=f.nextCheckTimestampMs,d[4]=c.i64.of_float(Date.now()),c.i64.neq(d[5],void 0)&&c.i64.ge(d[4],d[5])?c.sequence([function(b){return c.db.table(183).put({threadKey:a[0],suspectId:a[0]})},function(e){return d[7]=new c.Map(),d[7].set("thread_key",a[0]),d[7].set("sync_group",d[0]),d[8]=c.toJSON(d[7]),c.storedProcedure(b("LSIssueNewTask"),"proactive_warnings_fetch_queue",c.i64.cast([0,192]),d[8],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[6]=c.i64.cast([0,1])}]):c.resolve((c.i64.neq(d[5],void 0)&&f.tag!==void 0?d[7]=c.i64.cast([0,2]):d[7]=c.i64.cast([0,3]),d[6]=d[7]))},function(a){return d[2]=d[6]}]))})}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSFetchProactiveWarningsIfNeededStoredProcedure",["LSFetchProactiveWarningsIfNeeded","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;return c("LSFetchProactiveWarningsIfNeeded").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSMarkOptimisticMessageFailedStoredProcedure",["LSMarkOptimisticMessageFailed","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.optimisticMid;d[1]=b.errorMessage;return c("LSMarkOptimisticMessageFailed").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSSendTypingIndicator",["LSIssueNewFireAndForgetTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return d[2]=["typing","_",c.i64.to_string(a[0])].join(""),c.forEach(c.filter(c.db.table(5).fetch(),function(a){return d[2]===a.queueName}),function(a){return a["delete"]()})},function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("is_group_thread",a[1]),d[0].set("is_typing",a[2]),d[0].set("attribution",c.i64.cast([0,0])),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewFireAndForgetTask"),d[2],c.i64.cast([0,3]),d[1])}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSSendTypingIndicatorStoredProcedure",["LSSendTypingIndicator","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.isGroupThread;d[2]=b.isTyping;return c("LSSendTypingIndicator").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("MAWCreateGroupThread",["fbt","I64","LSFactory","LSIssueNewErrorStoredProcedure","MAWBridgeSendAndReceive","MAWJobDefinitions","MAWTimedJob","WAJobOrchestratorTypes","asyncToGeneratorRuntime","promiseDone","unrecoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.db,e=a.deduplicationKey,g=a.isDualSend;g=g===void 0?!1:g;var j=a.offlineThreadingId,k=a.participantIds;a=a.threadName;j=j!=null?(i||(i=d("I64"))).to_string(j):void 0;var l="msgr";e=(yield d("MAWTimedJob").TimedUIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("createGroup",{extras:{clientThreadKey:j,deduplicationKey:e,isDualSend:g,platform:l},key:j,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION},subject:a,uniqKey:j,users:k})));a=e.error;j=e.value;if(a==null&&j!=null&&j.type===l){k=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getThreadIdByChatJid",{chatJid:j.chatJid}));if(k==null)throw c("unrecoverableViolation")("Group was not found in database","messenger_e2ee_web");else return{chatId:k,created:!0,jid:j.chatJid}}if(!g){var m=h._("__JHASH__Q8EKHlLB3en__JHASH__").toString();c("promiseDone")(b.runInTransaction(function(a){return c("LSIssueNewErrorStoredProcedure")(c("LSFactory")(a),{errorBodyText:m,errorTitleText:m})},"readwrite",void 0,void 0,f.id+":89"))}throw c("unrecoverableViolation")("Unable to create group","messenger_e2ee_web")});return k.apply(this,arguments)}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.deduplicationKey;if(b==null)return j(a);b=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getThreadIdByDeduplicationKey",{deduplicationKey:b}));return b!=null?{chatId:b.chatId,created:!1,jid:b.jid}:j(a)});return l.apply(this,arguments)}g["default"]=a}),226);
__d("MAWOptimisticMessageUtils",["MAWBridgeSendAndReceive","Promise","asyncToGeneratorRuntime","qex"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(c("qex")._("244")===!0){var a=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getWATime"));return a.millisTime}else return(h||(h=b("Promise"))).resolve(Date.now())});return i.apply(this,arguments)}g.getOptimisticMessageTimestamp=a}),98);
__d("MAWCreateOptimisticSecureMessage",["I64","LSAuthorityLevel","LSIntEnum","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSMessageSendStatus","LSQuickReplyType","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWBridgeBuildMsg","MAWMsgReplySnippet","MessagingAttachmentType","QPLUserFlow","ReQL","asyncToGeneratorRuntime","gkx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){if(e==null)return[void 0,void 0];var g=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.messages).getKeyRange(b,e.timestampMs,e.messageId)));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"get_reply_msg_end",{instanceKey:f});a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b,e.messageId)));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"get_reply_attachment_end",{instanceKey:f});return[g,a]});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(b)));return a==null?void 0:a.firstName});return m.apply(this,arguments)}function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){if(b==null)return;a=(yield l(a,b.senderId));return(a=d("MAWMsgReplySnippet").buildLocalizedReplySnippet({isAuthorMe:!0,isDeletedMsg:b.replyStatus===c("LSReplyMessageStatus").DELETED,recipientName:a,replySenderIsMe:(h||(h=d("I64"))).equal(b.senderId,e)}))==null?void 0:a.toString()});return o.apply(this,arguments)}function p(a){if(a==null)return;var b=a.attachmentType;return(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER))?a.previewUrl:void 0}function q(a){if(a!=null){if((h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO);if((h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)))return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER);if((h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO);return(h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))?(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").GIF):(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").OTHER)}}function a(a,b,c,d,e,f,g,h,i,j,k,l,m){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h,k,l,m,o,r,s,t){b=(yield j(b,h,f,l));l=b[0];b=b[1];g=(yield d("MAWBridgeBuildMsg").buildOptimisticMessage(g,l,m));m=(yield n(a,l,e));a=babelHelpers["extends"]({},g,{authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),displayedContentTypes:i.ofNumber(s),hasQuickReplies:!1,hotEmojiSize:k,isAdminMessage:!1,isCollapsed:!1,isUnsent:!1,messageId:o,offlineThreadingId:c("gkx")("23990")&&t!=null?t:o,primarySortKey:r,quickReplyType:i.ofNumber(c("LSQuickReplyType").NONE),replyAttachmentType:q(b),replyMediaPreviewHeight:b==null?void 0:b.previewHeight,replyMediaPreviewWidth:b==null?void 0:b.previewWidth,replyMediaUrl:p(b),replyMediaUrlMimeType:b==null?void 0:b.playableUrlMimeType,replySnippet:m,replySourceId:f==null?void 0:f.messageId,replySourceType:f!=null?(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,replySourceTypeV2:f!=null?(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,senderId:e,sendStatus:i.ofNumber(c("LSMessageSendStatus").SENDING_TO_SERVER),sendStatusV2:i.ofNumber(1),textHasLinks:!1,threadKey:h,timestampMs:r,transportKey:"WhatsApp",viewFlags:i.ofNumber(0)});return a});return r.apply(this,arguments)}g.getReply=j;g.getOptimisticReplySnippet=n;g.getReplyMediaUrl=p;g.getReplyAttachmentType=q;g.createOptimisticMessageTxn=a}),98);
__d("MAWLoadingStateOutstandingUIReadyOfflineQueueSelector",["MAWSharedProtocolQueueConst"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return function(b){var c=b.offlineQueueCount,e=b.offlineQueueSyncState;b=b.offlineQueueThreadStatus;return a!=null&&Object.keys(b).length>0?b[a]!=null&&b[a].chatStatus!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete:c>0&&e!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete}};g.outstandingUIReadyOfflineQueueSelector=a}),98);
__d("MAWMiActMaybeCreateActThread",["FBLogger","I64","LSAuthorityLevel","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSVerifyE2EEMetadataThreadExistsV2StoredProcedure","MAWCreateGroupThread","MAWCreateOneToOneThread","MAWMiActCreateThreadInActWithMiData","MAWMiActGetThreadLifecycleState","MAWMiActThreadLifecycleState","WAJids","WATagsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Duplicated thread creation for ",""]);j=function(){return a};return a}function k(a,b){return a.runInTransaction(function(a){return c("LSVerifyE2EEMetadataThreadExistsV2StoredProcedure")(c("LSFactory")(a),{authorityLevel:(h||(h=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),threadKey:b,threadType:h.ofNumber(15)}).then(function(){})},"readwrite",void 0,void 0,f.id+":43")}function l(a,b,e){var f=e.actorId;e=e.participantIds;var g=e.filter(function(a){return a!==(i||(i=d("I64"))).to_string(f)});if(d("LSMessagingThreadTypeUtil").isOneToOne(b.threadType)&&g.length===1){var j=g.length===1?g:e;return d("MAWCreateOneToOneThread").call(a,(i||(i=d("I64"))).of_string(j[0]),i.to_string(b.threadKey),"maybeCreateActThread")}else if(d("LSMessagingThreadTypeUtil").isGroup(b.threadType)&&g.length>1)return c("MAWCreateGroupThread")({db:a,offlineThreadingId:b.threadKey,participantIds:e});throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Did not know which type of optimistic thread to create for\n    threadKey: %s, participantsCount: %s, threadType: %s",(i||(i=d("I64"))).to_string(b.threadKey),e.length,(h||(h=d("LSIntEnum"))).toNumber(b.threadType))}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("MAWMiActCreateThreadInActWithMiData").miActCreateThreadInActWithMiData(a.serverThreadKey,a.jidInt64,a.thread.lastActivityTimestampMs,a.thread.lastReadWatermarkTimestampMs,d("LSMessagingThreadTypeUtil").isGroup(a.thread.threadType)));return{chatId:a.chatId,created:a.isCreated,jid:a.chatJid}});return n.apply(this,arguments)}function o(a,b){if(!d("LSMessagingThreadTypeUtil").isOneToOne(a.thread.threadType))return null;var c=b.actorId;b=b.participantIds;b=b.filter(function(a){return a!==(i||(i=d("I64"))).to_string(c)});if(b.length!==1)return null;b=b[0];return{jid:d("WAJids").unsafeCoerceToChatJid(b+"@msgr"),jidInt64:(i||(i=d("I64"))).of_string(b),serverThreadKey:a.thread.threadKey,thread:a.thread,type:"AUTHORITATIVE_THREAD_ONLY"}}var p=new Map(),q=new Set();function a(a,b,c){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(yield d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByThreadKey(a.tables,b,"maybeCreateActThread"));switch(f.type){case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.ACT_THREAD_ONLY:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.THREAD_KEY_ONLY:yield k(a,b);throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] We did not call MiActLoadExistingThread for threadKey: %s, threadState: %s",(i||(i=d("I64"))).to_string(b),f.type);case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:var g=o(f,e);if(g!=null){q.has(g.jid)&&d("WATagsLogger").TAGS(["occamadillo","retry_create_thread"]).LOG(j(),g.jid);q.add(g.jid);return m(g)}else throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] MI inserted the thread but the mapping row was not\n        written or it was deleted for threadKey: %s",(i||(i=d("I64"))).to_string(b));case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT:g=(i||(i=d("I64"))).to_string(b);var h=p.get(g);if(h!=null)return h;h=l(a,f.thread,e);p.set(g,h);return h;case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD_WITH_ACT:yield k(a,b);return{chatId:f.chatId,created:!1,jid:f.jid};case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT:return{chatId:f.chatId,created:!1,jid:f.jid};case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY:return m(f);case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE:return{chatId:f.chatId,created:!1,jid:f.jid};case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.ACT_THREAD_ONLY_BY_CHAT_ID:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW:throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unhandled ACT thread creation state %s for threadKey:\n        %s",f.type,(i||(i=d("I64"))).to_string(b));default:f.type;throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unreachable miActThreadState.type: %s",f.type)}});return r.apply(this,arguments)}g["default"]=a}),98);
__d("MAWOptimisticUpdateContactRelationship",["I64","LSAddMessengerContactStoredProcedure","LSFactory","LSMessagingThreadTypeUtil","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,g){if(!d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType))return;c("promiseDone")(e.runInTransaction(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var f;f=(f=(yield d("ReQL").firstAsync(d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(e.tables.contacts)).filter(function(a){a[0];a=a[1];return!(h||(h=d("I64"))).equal(a.id,g)}))))!=null?f:[void 0,void 0];f[0];f=f[1];if(f==null)return;var i=babelHelpers["extends"]({},f,{contactViewerRelationship:(h||(h=d("I64"))).of_string("2")});yield b.contacts.upsert([f.id],i);d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)&&(yield c("LSAddMessengerContactStoredProcedure")(c("LSFactory")(b),{contactId:f.id}))});return function(a){return f.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":39"))}g.call=a}),98);
__d("MessageRequestsLog",["I64","coerceMessagingThreadTypeToLSThreadType","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i=c("requireDeferred"))("MessageRequestsBulkActionConfirmedFalcoEvent").__setRef("MessageRequestsLog"),k=i("MessageRequestsBulkActionEditFalcoEvent").__setRef("MessageRequestsLog"),l=i("MessageRequestsBulkActionTappedFalcoEvent").__setRef("MessageRequestsLog"),m=i("MessageRequestsInfoBannerShownFalcoEvent").__setRef("MessageRequestsLog"),n=i("MessageRequestsThreadActionConfirmedFalcoEvent").__setRef("MessageRequestsLog"),o=i("MessageRequestsThreadActionTappedFalcoEvent").__setRef("MessageRequestsLog"),p=i("MessageRequestsThreadDenialOptionsTappedFalcoEvent").__setRef("MessageRequestsLog"),q=i("MessageRequestsViewThreadlistFalcoEvent").__setRef("MessageRequestsLog");function r(a){switch(a.folderName){case"pending":return-1;case"other":return-2;case"spam":return-3;case"inbox":return 0}}function a(a,b,e){m.onReady(function(f){f.log(function(){return{action:0,extra_data_map:void 0,group_thread_id:e,other_user_id:b,request_id:void 0,thread_folder:r(a),thread_id:e!=null?e:(h||(h=d("I64"))).to_string(a.threadKey),thread_type:c("coerceMessagingThreadTypeToLSThreadType")(a.threadType)}})})}function b(a,b){p.onReady(function(e){e.log(function(){return{action:0,extra_data_map:void 0,group_thread_id:void 0,other_user_id:b,request_id:void 0,thread_folder:r(a),thread_id:(h||(h=d("I64"))).to_string(a.threadKey),thread_type:c("coerceMessagingThreadTypeToLSThreadType")(a.threadType)}})})}function e(a,b,e,f){o.onReady(function(g){g.log(function(){return{action:b,extra_data_map:void 0,group_thread_id:f,other_user_id:e,request_id:void 0,thread_folder:r(a),thread_id:f!=null?f:(h||(h=d("I64"))).to_string(a.threadKey),thread_type:c("coerceMessagingThreadTypeToLSThreadType")(a.threadType)}})})}function f(a,b,e,f){n.onReady(function(g){g.log(function(){return{action:b,extra_data_map:void 0,group_thread_id:f,other_user_id:e,request_id:void 0,thread_folder:r(a),thread_id:f!=null?f:(h||(h=d("I64"))).to_string(a.threadKey),thread_type:c("coerceMessagingThreadTypeToLSThreadType")(a.threadType)}})})}function s(a,b){q.onReady(function(c){c.log(function(){return{action:0,actioned_thread_count:"0",actioned_thread_ids:void 0,actioned_unread_thread_count:"0",entry_point:a,folder:b,request_id:void 0}})})}function t(a,b,c,d,e){l.onReady(function(f){f.log(function(){return{action:d,actioned_thread_count:b.toString(),actioned_thread_ids:void 0,actioned_unread_thread_count:c.toString(),entry_point:a,folder:e,request_id:void 0}})})}function u(a,b,c,d,e){j.onReady(function(f){f.log(function(){return{action:d,actioned_thread_count:b.toString(),actioned_thread_ids:void 0,actioned_unread_thread_count:c.toString(),entry_point:a,folder:e,request_id:void 0}})})}function v(a,b,c){k.onReady(function(d){d.log(function(){return{action:b,actioned_thread_count:"0",actioned_thread_ids:void 0,actioned_unread_thread_count:"0",entry_point:a,folder:c,request_id:void 0}})})}g.logMessageRequestInfoShown=a;g.logDenialOptionsTapped=b;g.logActionTapped=e;g.logActionConfirmed=f;g.logMessageRequestsView=s;g.logMessageRequestsBulkActionTapped=t;g.logMessageRequestsBulkActionConfirmed=u;g.logMessageRequestsBulkActionEdit=v}),98);
__d("MAWSecureComposerUtils",["I64","LSMessagingThreadTypeUtil","MAWJobDefinitions","MAWMiActOnActThreadReady","MAWUIJob","MessageRequestsLog","Promise","WAJobOrchestratorTypes","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,f,g){if(d("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)){f!=null&&d("MessageRequestsLog").logActionConfirmed(e,8,(i||(i=d("I64"))).to_string(f));c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(a.tables,e.threadKey,"MAWSecureComposerUtils",function(a,c,e){d("MAWUIJob").UIJobStarters.fireAndForget(d("MAWJobDefinitions").createStartJobInfo("deleteThread",{chatJid:e,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));return(h||(h=b("Promise"))).resolve()}));return}}g.onDeleteThread=a}),98);
__d("MAWSecureTypingState",["I64","Int64Hooks","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","MAWBridgeFireAndForget","MAWMiActOnActThreadReady","MWPActor.react","MessengerWebUXLogger","Promise","ReQL","ReQLSuspense","WABridgedAPI","WAChatState","WAJids","asyncToGeneratorRuntime","gkx","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a,b,c,d){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){if(!(j||(j=d("I64"))).equal(f,(k||(k=d("LSIntEnum"))).ofNumber(15)))return(i||(i=b("Promise"))).resolve(!0);f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.participants,["contactId"]).getKeyRange(e).filter(function(a){return!(j||(j=d("I64"))).equal(a.contactId,g)})));if(f==null)return!1;e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(f.contactId)));return e==null?!1:(j||(j=d("I64"))).equal(e.blockedByViewerStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))});return m.apply(this,arguments)}var n=[];function a(a,e,g){var m=(h||(h=c("useReStore")))(),o=d("MWPActor.react").useActor(),p=(j||(j=d("I64"))).to_string(e),q=c("MessengerWebUXLogger").useInteractionLogger(),r=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(m.tables.participants,["contactId"]).getKeyRange(e).map(function(a){return d("WAJids").toMsgrUserJid((j||(j=d("I64"))).to_string(a.contactId))})},[m,e],f.id+":87");return d("Int64Hooks").useCallbackInt64(function(f){(j||(j=d("I64"))).ge(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(g)&&(c("gkx")("24137")&&d("LSMessagingThreadTypeUtil").isGroup(g)&&!n.includes(p)&&c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(m.tables,e,"MAWSecureTypingState",function(a,b,e){n.push(p);return c("WABridgedAPI").preEstablishSession({groupJid:d("WAJids").toGroupJid(e),userJids:r}).then(function(){})})),c("promiseDone")(l(m,e,g,o).then(function(a){return!a?(i||(i=b("Promise"))).resolve():d("MAWMiActOnActThreadReady").onActThreadReady(m.tables,e,"MAWSecureTypingState",function(a,c,h){q==null?void 0:q({eventName:"send_typing_indicators",threadKey:e,threadType:g});d("MAWBridgeFireAndForget").fireAndForget("backend","sendChatStateFromComposer",{chatJid:h,state:f?d("WAChatState").TYPING:d("WAChatState").IDLE});return(i||(i=b("Promise"))).resolve()})})))},[m,r,a,e,g,o,p,q])}g.useOnTypingStateChanged=a}),98);
__d("MAWSendSecureAttachment",["FBLogger","I64","MAWBridgeSendAndReceive","MAWDbMsg","MAWJobDefinitions","MAWUIJob","MAWUIThreadCache","QPLUserFlow","WAJobOrchestratorTypes","asyncToGeneratorRuntime","qpl","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("MWLogSend").__setRef("MAWSendSecureAttachment");function a(a,b,c,d,e,f,g,h,i,k,l,m,n,o,p){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,j,k,l,m,n,o,p,q,r,s){b=(yield d("MAWUIThreadCache").getThreadJidByChatId({threadId:b}));if(b==null){c("QPLUserFlow").endFailure(c("qpl")._(25313175,"1551"),"no_chat_jid",{instanceKey:o});return}var t=null;if(m!=null){m=d("MAWDbMsg").toMsgId(m.messageId);m!=null&&(t=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:m})))}c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"sending_media_to_wajob",{instanceKey:o});switch(j.type){case"image":case"animated_image":var u;m=j.imageSpec;var v=j.thumbnailUrlAndSpec;yield d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMediaMsg",{args:{ephemeralSetting:(u=p)!=null?u:void 0,height:m.height,initiatingSource:q,isFirstMsg:n,isForwarded:!1,jpegThumbnail:v.jpegThumbnail,jpegThumbnailHeight:v.height,jpegThumbnailWidth:v.width,offlineAttachmentId:k,optimisticMsg:r,quote:(u=t)!=null?u:void 0,s2sInstanceKey:o,source:l,width:m.width},attachmentType:"image",chatJid:b,externalId:s,file:j.file,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));break;case"video":v=j.thumbnailUrlAndSpec;yield d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMediaMsg",{args:{duration:v.duration,ephemeralSetting:(u=p)!=null?u:void 0,height:v.height,initiatingSource:q,isFirstMsg:n,isForwarded:!1,jpegThumbnail:v.jpegThumbnail,jpegThumbnailHeight:v.height,jpegThumbnailWidth:v.width,offlineAttachmentId:k,optimisticMsg:r,quote:(m=t)!=null?m:void 0,s2sInstanceKey:o,source:l,width:v.width},attachmentType:"video",chatJid:b,externalId:s,file:j.file,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));break;case"audio":u=j.durations;m=j.isPtt;yield d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMediaMsg",{args:{duration:Math.round(u),ephemeralSetting:(v=p)!=null?v:void 0,initiatingSource:q,isFirstMsg:n,isForwarded:!1,isPtt:m,offlineAttachmentId:k,optimisticMsg:r,quote:(u=t)!=null?u:void 0,s2sInstanceKey:o,source:l},attachmentType:"audio",chatJid:b,externalId:s,file:j.file,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));break;case"document":v=j.filename;yield d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMediaMsg",{args:{ephemeralSetting:(m=p)!=null?m:void 0,filename:v,initiatingSource:q,isFirstMsg:n,isForwarded:!1,offlineAttachmentId:k,optimisticMsg:r,quote:(u=t)!=null?u:void 0,s2sInstanceKey:o,source:l},attachmentType:"application",chatJid:b,externalId:s,file:j.file,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));break;default:c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"uknown_file_type_sendMediaMsg_not_fired",{instanceKey:o}),c("FBLogger")("messenger_web_media").addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","failed while sending attachment").mustfix("sendSecureAttachment: Failed while sending attachment, unknown attachment type %s",j.type)}var w;switch(j.type){case"image":w=8;break;case"video":w=10;break;case"audio":w=11;break;case"document":w=34;break}i.onReady(function(b){var c=(h||(h=d("I64"))).to_string(e);return b.log(a,{actor:g,attachmentFbids:[],attachmentType:w,backend:1,hasReply:!1,messagingThreadId:c,offlineThreadingId:k,sendType:0,source:l,threadKey:e,threadType:f})});return b});return j.apply(this,arguments)}g.sendSecureAttachment=a}),98);
__d("MAWSendFileMsgIfNecessary",["FBLogger","MAWExternalId","MAWImagePreProcess","MAWSendSecureAttachment","Promise","asyncToGeneratorRuntime","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=e.actorId,g=e.attachmentOfflineId,i=e.attachments,j=e.ephemeralSetting,k=e.externalAttachmentUrl,l=e.initiatingSource,m=e.isFirstMsg,n=e.offlineAttachmentIdToMessageData,o=e.reply,p=e.s2sInstanceKey,q=e.source,r=e.stickerId,s=e.thread,t=e.threadId;e=e.voiceClip;var u=[];if(e!=null){e={durations:e.duration||0,file:e.file,isPtt:!0,type:"audio"};u.push([e,g])}if(k!=null){e=(yield window.fetch(k,{cache:"no-cache"}).then(function(a){return a.blob()})["catch"](function(a){d("sendToSentQPLLogger").markSendToSentPoint(p,"fetch_external_attachment_failed");throw a}));k=r!=null;r=(yield d("MAWImagePreProcess").imagePreprocess(new File([e],"stickerFromPicker",{type:e.type}),k));u.push([r,g])}u=u.concat(i);d("sendToSentQPLLogger").markSendToSentPoint(p,"prepare_attachment_promises");e=u.map(function(b){var c=b[0];b=b[1];var e=n==null?void 0:n.get(b);return d("MAWSendSecureAttachment").sendSecureAttachment(a,t,s.threadKey,s.threadType,f,c,b,q,o,m,p,j,l,e==null?void 0:{msgId:e==null?void 0:e.offlineMsgId,ts:e==null?void 0:e.offlineMsgTimestamp},(c=e==null?void 0:e.externalId)!=null?c:d("MAWExternalId").generateExternalId())});yield (h||(h=b("Promise"))).all(e)["catch"](function(a){d("sendToSentQPLLogger").markSendToSentPoint(p,"send_attachment_promise_failed"),d("sendToSentQPLLogger").markSendToSentFail(p,a),a instanceof Error?c("FBLogger")("messenger_web_media").catching(a).addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","failed while sending attachment promise").mustfix("Failed while sending message"):c("FBLogger")("messenger_web_media").addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","failed while sending attachment promise").mustfix("Failed while sending attachment, %s",a.message)})});return i.apply(this,arguments)}g.sendFileMsgIfNecessary=a}),98);
__d("MAWSendSecureMessageV2Utils",["I64","LSDatabaseSingleton","MAWMiActMaybeCreateActThread","MWPActor.react","ReQL","StickerConstants","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){var a=d("MWPActor.react").useActor();return function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var e=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton),f=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(e.tables.participants,["contactId"]).getKeyRange(b).map(function(a){return(i||(i=d("I64"))).to_string(a.contactId)})));return c("MAWMiActMaybeCreateActThread")(e,b,{actorId:a,participantIds:f})});return function(a){return e.apply(this,arguments)}}()}function e(a){return a===c("StickerConstants").LIKE_STICKER_ID||a===c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID||a===c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID||a===c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID}g.useMaybeCreateThreadForMAWSendSecurMessageV2=a;g.isLikeStickerId=e}),98);
__d("MAWSupportedFileTypes",[],(function(a,b,c,d,e,f){"use strict";a=["*/*"];f.supportedFileTypes=a}),66);
__d("WAGetMediaDevicesSupportedConstraints",["WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getSupportedConstraints is not supported in this browser. Error: ",""]);h=function(){return a};return a}function a(){try{var a;a=(a=navigator.mediaDevices)==null?void 0:a.getSupportedConstraints();return a}catch(a){d("WALogger").LOG(h(),a);return null}}g.getMediaDevicesSupportedConstraints=a}),98);
__d("MWPUseVoiceRecorder",["AudioContextSingleton","MWChatRecorderUtilsWorkerResource","MWPAudioPlayerIcons.react","MWPAudioPlayerLabels","Promise","WAGetMediaDevicesSupportedConstraints","WebWorker","clearTimeout","emptyFunction","gkx","react","setTimeout","useIsMountedRef","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i,l=k.useCallback,m=k.useEffect,n=k.useReducer,o=k.useRef;function a(a){switch(a.stage){case"Unopen":case"Recording":return!1;case"Recorded":case"Playing":return!0}}function e(a){switch(a.stage){case"Unopen":case"Recording":return!1;case"Recorded":case"Playing":return!0}}function p(a){switch(a.stage){case"Unopen":return 0;case"Recording":return a.duration;case"Recorded":case"Playing":return Math.max(a.duration-a.currentTime,0)}}function q(a){switch(a.stage){case"Unopen":return 0;case"Recording":return a.recordingTimeout;case"Recorded":case"Playing":return a.duration}}function r(a){switch(a.stage){case"Unopen":case"Recording":return;case"Recorded":case"Playing":return a.currentTime}}function s(a){switch(a.stage){case"Unopen":case"Recorded":return!1;case"Recording":case"Playing":return!0}}function t(a){if(a.stage==="Recorded")return a.currentTime===0;else return!1}function u(a){switch(a.stage){case"Recording":return d("MWPAudioPlayerLabels").stopLabel;case"Unopen":case"Recorded":return d("MWPAudioPlayerLabels").playLabel;case"Playing":return d("MWPAudioPlayerLabels").pauseLabel}}function v(a,b){switch(a.stage){case"Recording":return j.jsx(d("MWPAudioPlayerIcons.react").StopIcon,{color:b});case"Unopen":case"Recorded":return j.jsx(d("MWPAudioPlayerIcons.react").PlayIcon,{color:b});case"Playing":return j.jsx(d("MWPAudioPlayerIcons.react").PauseIcon,{color:b})}}v.displayName=v.name+" [from "+f.id+"]";function w(a,b){switch(b.type){case"Start":return{duration:0,mediaStream:b.mediaStream,recordingTimeout:b.recordingTimeout,stage:"Recording"};case"Toggle":switch(a.stage){case"Unopen":return a;case"Recording":return{currentTime:0,duration:a.duration,stage:"Recorded"};case"Recorded":return{currentTime:a.currentTime,duration:a.duration,stage:"Playing"};case"Playing":return{currentTime:a.currentTime,duration:a.duration,stage:"Recorded"}}break;case"UpdateDuration":var c=b.duration;switch(a.stage){case"Unopen":return a;case"Recording":return{duration:c,mediaStream:a.mediaStream,recordingTimeout:a.recordingTimeout,stage:"Recording"};case"Recorded":return{currentTime:a.currentTime,duration:c,stage:"Recorded"};case"Playing":return{currentTime:a.currentTime,duration:c,stage:"Playing"}}break;case"UpdateTime":c=b.currentTime;switch(a.stage){case"Unopen":case"Recording":return a;case"Recorded":var d=a.duration;return c===d?{currentTime:0,duration:d,stage:"Recorded"}:{currentTime:c,duration:d,stage:"Recorded"};case"Playing":d=a.duration;return c===d?{currentTime:0,duration:d,stage:"Recorded"}:{currentTime:c,duration:d,stage:"Playing"}}break;case"RecordingTimeout":return{currentTime:0,duration:b.recordingTimeout,stage:"Recorded"};case"Reset":return{stage:"Unopen"}}}var x={stage:"Unopen"};function y(a,e,f){var g;a===void 0&&(a=60);e===void 0&&(e=c("emptyFunction"));f===void 0&&(f=c("emptyFunction"));var i=c("gkx")("24131"),j=((g=d("WAGetMediaDevicesSupportedConstraints").getMediaDevicesSupportedConstraints())==null?void 0:g.sampleRate)===!0&&c("gkx")("9179"),k=i?1:2;g=n(w,x);var p=g[0],q=g[1],r=c("useIsMountedRef")(),s=o(),t=o([]),u=o([]),v=o(),y=o(),z=o(),A=o(),B=o(c("emptyFunction")),C=l(function(a){var b=a[0],c=a[1];if(!r.current)return;a=URL.createObjectURL(b);z.current=a;var d=new Audio(a);d.addEventListener("canplay",function(){y.current=d;var a=d.duration;q({duration:a,type:"UpdateDuration"});a={duration:a,file:b,waveformData:c};A.current=a;B.current(a)});d.addEventListener("timeupdate",function(){var a;a=(a=y.current)==null?void 0:a.currentTime;a!=null&&q({currentTime:a,type:"UpdateTime"})});d.addEventListener("durationchange",function(){var a;a=(a=y.current)==null?void 0:a.duration;a!=null&&!Number.isNaN(a)&&q({duration:a,type:"UpdateDuration"})})},[r]),D=l(function(){if(s.current==null||v.current==null)return;v.current.postMessage({buffersL:t.current,buffersR:k===2?u.current:null,sampleRate:s.current})},[k]);m(function(){if(p.stage!=="Recording")return;t.current=[];u.current=[];var a=c("AudioContextSingleton").get({sampleRate:j?44100:void 0}),b=a.destination;s.current=a.sampleRate;var d=p.mediaStream,f=a.createScriptProcessor(4096,k,k);a=a.createMediaStreamSource(d);v.current=new(c("WebWorker"))(c("MWChatRecorderUtilsWorkerResource")).setMessageHandler(C).setAllowCrossPageTransition(!0).execute();var g=function(a){p.stage==="Recording"&&a instanceof AudioProcessingEvent&&(t.current.push(a.inputBuffer.getChannelData(0).slice()),k===2&&u.current.push(a.inputBuffer.getChannelData(1).slice()))};f.addEventListener("audioprocess",g);a.connect(f);f.connect(b);e();return function(){d.getAudioTracks().forEach(function(a){if(a.readyState!=="ended"){a.stop();return}}),f.removeEventListener("audioprocess",g)}},[C,e,p.stage,p.mediaStream,k,j]);var E=c("usePrevious")(p);m(function(){(E==null?void 0:E.stage)==="Recording"&&p.stage==="Recorded"&&D()},[E==null?void 0:E.stage,D,p.stage]);m(function(){if(p.stage!=="Recording")return;var b=Date.now(),d,e=function e(){var f=(Date.now()-b)/1e3;if(f>=a){q({recordingTimeout:a,type:"RecordingTimeout"});return}q({duration:f,type:"UpdateDuration"});d=c("setTimeout")(e,1e3)};d=c("setTimeout")(e,1e3);return function(){d!=null&&c("clearTimeout")(d)}},[a,p.stage]);i=l(function(b){q({mediaStream:b,recordingTimeout:a,type:"Start"})},[a]);g=l(function(){var a;q({type:"Reset"});(a=y.current)==null?void 0:a.pause();y.current=void 0;A.current=void 0;s.current=void 0;a=z.current;a!=null&&(URL.revokeObjectURL(a),z.current=void 0)},[]);var F=l(function(){var a=function(){q({type:"Toggle"})},b=y.current;if(b==null){a();return}switch(p.stage){case"Unopen":case"Recording":a();break;case"Recorded":b.play().then(a)["catch"](f);break;case"Playing":b.pause();a();break}},[f,p.stage]),G=l(function(){return new(h||(h=b("Promise")))(function(a){var b=A.current;if(b!=null)return a(b);B.current=a;if(p.stage==="Recording")return F()})},[p,F]);return{audioEl:y,getVoiceClip:G,reset:g,start:i,state:p,toggle:F}}g.showScreenReaderLabel=a;g.hasScrubber=e;g.getTimerTime=p;g.getDuration=q;g.getCurrentTime=r;g.isProgressing=s;g.isCompleted=t;g.getPlaybackLabel=u;g.getPlaybackIcon=v;g.useVoiceRecorder=y}),98);
__d("MWAudioRecorder.react",["MWAudioPlayer.react","MWPAudioPlayerButtons.react","MWPAudioPlayerContainer.react","MWPAudioPlayerHighlight.react","MWPAudioPlayerKeyCommands.react","MWPAudioPlayerSharedStyles","MWPAudioPlayerTimer.react","MWPAudioPlayerUtils","MWPUseVoiceRecorder","MWXTooltip.react","react","requireDeferred","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useRef,l=c("requireDeferred")("MWChatAudioLog").__setRef("MWAudioRecorder.react");function a(a){var b;a=a.voiceRecorder;var e=a.audioEl,f=a.state,g=a.toggle;a=k();var i=d("MWPAudioPlayerUtils").useResetHighlightProgress(a),m=(b=d("MWPUseVoiceRecorder")).hasScrubber(f),n=function(){g();switch(f.stage){case"Unopen":return;case"Recording":l.onReady(function(a){return a.logClickStopRecording(0)});return;case"Recorded":var a=f.currentTime,b=f.duration;a===0?l.onReady(function(a){return a.logPlaybackStart(b)}):l.onReady(function(c){return c.logPlaybackResume(b,a)});return;case"Playing":var c=f.currentTime,d=f.duration;l.onReady(function(a){return a.logPlaybackPause(d,c)});return}},o=d("MWPAudioPlayerUtils").useProgressLiveUpdate(b.getDuration(f),e,b.getCurrentTime(f),b.isProgressing(f),!1,b.isCompleted(f)),p=d("MWAudioPlayer.react").useHighlightStyles(!0);b=b.getPlaybackLabel(f);var q=function(){switch(f.stage){case"Unopen":case"Recording":return null;case"Recorded":case"Playing":return j.jsx(d("MWPAudioPlayerUtils").ScreenReaderLabel,{currentTime:f.currentTime,duration:f.duration})}}();return j.jsx(c("MWPAudioPlayerContainer.react"),{audioEl:e,hasScrubber:m,scrubberRef:a,style:{backgroundColor:"var(--chat-composer-button-color, var(--accent))",borderRadius:"18px"},testid:void 0,useCase:d("MWPAudioPlayerUtils").UseCase.RECORDER,children:j.jsxs(c("MWPAudioPlayerKeyCommands.react"),{audioEl:e,children:[j.jsx(d("MWPAudioPlayerHighlight.react").MWPAudioPlayerHighlightV1,{ref:o,xstyle:p}),q,j.jsx(d("MWPAudioPlayerHighlight.react").MWPAudioPlayerHighlightV1,{ref:a,xstyle:p}),j.jsx("div",{className:(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.playbackButtonContainer),onMouseMove:m?i:void 0,children:j.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:b,children:j.jsx(d("MWPAudioPlayerButtons.react").AudioPlayerPlaybackButton,{icon:d("MWPUseVoiceRecorder").getPlaybackIcon(f,"var(--chat-composer-button-color, var(--accent))"),label:b,onPress:n})})}),j.jsx(c("MWPAudioPlayerTimer.react"),{time:d("MWPUseVoiceRecorder").getTimerTime(f)})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatComposerVoiceIndicator.react",["fbt","CurrentUser","MDSTextPairing.react","MWXText.react","getTopMostRoute","react","useCometRouterState"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){a=a.forceShown_TEST_ONLY;a=a===void 0?!1:a;var b=c("useCometRouterState")();b=b!=null?c("getTopMostRoute")(b):null;b=(b=b==null?void 0:b.tracePolicy)!=null?b:null;b=b!==null?b.startsWith("comet.page.admin")||b.startsWith("comet.group.admin"):!1;var d=c("CurrentUser").getName();d=h._("__JHASH__moy48BoqFvP__JHASH__",[h._param("full name",j.jsx(c("MWXText.react"),{type:"meta2",children:d}))]);return b||a?j.jsx("div",{className:"x1exxf4d x13fuv20 x178xt8z xi81zsa x14vqqas xkrivgy xat24cr x1gryazu xyinxu5 xho0xa1 xs9asl8 x1vobaek",children:j.jsx(c("MDSTextPairing.react"),{body:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:d}),level:4,textAlign:"center"})}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWChatUnavailableComposer.react",["fbt","ComponentMountUnmountSubspanLogger.react","MWBlockedComposerLogging","MWXComposerBanner.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.reason;a=a.thread;d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(a.threadKey,b);a=h._("__JHASH__FoZB3MxTOU9__JHASH__");return j.jsxs("div",{children:[j.jsx(c("ComponentMountUnmountSubspanLogger.react"),{description:"MWChatUnavailableComposer"}),j.jsx(c("MWXComposerBanner.react"),{bodyText:a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWChatViewerChatVisibilityHookQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6404754876239370"}),null);
__d("MWChatViewerChatVisibilityHookQuery.graphql",["MWChatViewerChatVisibilityHookQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_visibility",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatViewerChatVisibilityHookQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatViewerChatVisibilityHookQuery",selections:a},params:{id:b("MWChatViewerChatVisibilityHookQuery_facebookRelayOperation"),metadata:{},name:"MWChatViewerChatVisibilityHookQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatViewerChatVisibilityHook",["CometRelay","MWChatViewerChatVisibilityHookQuery.graphql","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useEffect,k=h!==void 0?h:h=b("MWChatViewerChatVisibilityHookQuery.graphql");function a(){var a,b=d("CometRelay").useRelayEnvironment(),e=d("CometRelay").useLazyLoadQuery(k,{},{fetchPolicy:"store-only"});j(function(){var a;(e==null?void 0:(a=e.viewer)==null?void 0:a.chat_visibility)==null&&c("promiseDone")(d("CometRelay").fetchQuery(b,k,{}).toPromise())},[e==null?void 0:(a=e.viewer)==null?void 0:a.chat_visibility,b]);return(e==null?void 0:(a=e.viewer)==null?void 0:a.chat_visibility)===!0}g.useViewerChatVisibility=a}),98);
__d("MWComposerPlaceholder.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.height;return i.jsx("div",{className:"x1exxf4d x13fuv20 x178xt8z",style:{height:a.toString()+"px"}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEditChannelDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6185531621550317"}),null);
__d("MWEditChannelDialogQuery$Parameters",["MWEditChannelDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWEditChannelDialogQuery_facebookRelayOperation"),metadata:{},name:"MWEditChannelDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWEditChannelDialog.entrypoint",["JSResourceForInteraction","MWEditChannelDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.threadID;return{queries:{queryReference:{options:{fetchPolicy:"network-only"},parameters:c("MWEditChannelDialogQuery$Parameters"),variables:{threadID:a}}}}},root:c("JSResourceForInteraction")("MWEditChannelDialog.react").__setRef("MWEditChannelDialog.entrypoint")};g["default"]=a}),98);
__d("MWEditChannelDialogTrigger.react",["I64","MWEditChannelDialog.entrypoint","promiseDone","react","useMWXEntryPointDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;j||d("react");function a(a){var b=a.children,e=a.threadKey,f=(h||(h=c("useReStore")))();a={threadID:(i||(i=d("I64"))).to_string(e)};a=c("useMWXEntryPointDialog")(c("MWEditChannelDialog.entrypoint"),a);var g=a[0];a=function(){c("promiseDone")(f.tables.threads.get(e),function(a){if(a==null)return;g({thread:a})})};return b(a)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWGetLSThreadReportingTokenFromThread",["I64","LSMessagingThreadTypeUtil","LSThreadBitOffset"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("LSThreadBitOffset").has(17,a);if(b)return d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)?window.btoa("message_thread:encrypted"):window.btoa("message_thread:"+(h||(h=d("I64"))).to_string(a.threadKey))}g["default"]=a}),98);
__d("MWGroupLimitContainer.react",["cr:3409","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(a){var c=a.children,d=a.groupLimitReachedContent;a=a.thread;a=(a=b("cr:3409")==null?void 0:b("cr:3409")(a.threadKey))!=null?a:[!1,!1];a=a[0];return a?d:c}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageRequestComposerBanner.react",["fbt","I64","JSResourceForInteraction","LSIntEnum","LSMessageThreadUnsendabilityStatus","MWMessageRequestSharedTexts.react","MWXComposerBanner.react","MessageRequestsLog","MessengerMSplitFlag","MessengerWebUXLogger","react","useMWXConfirmationDialog","useMWXLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));b=i;var m=b.useCallback,n=b.useMemo;function a(a){var b=a.isGroup,e=a.isGXAC,f=a.isIgContact,g=a.isMSplitContact,i=a.name,o=a.onDeleteConversation,p=a.onLeaveGroup,q=a.otherUserContact,r=a.secondaryName,s=a.thread,t=c("useMWXConfirmationDialog")();a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatBlockActionDialog.react").__setRef("MWMessageRequestComposerBanner.react"));var u=a[0];a[1];var v=(j||(j=d("I64"))).equal(s.threadType,(k||(k=d("LSIntEnum"))).ofNumber(1))&&s.cannotUnsendReason!=null&&(j||(j=d("I64"))).equal(s.cannotUnsendReason,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").DENY_IF_PAGE_THREAD)),w=q!=null?(j||(j=d("I64"))).to_string(q.id):void 0,x=n(function(){return{onConfirm:o,thread:s}},[o,s]),y=m(function(){var a;u({loggingData:{entryPoint:4,requestId:void 0,source:v?5:1,sourceOwner:0},targetFBID:(a=w)!=null?a:(j||(j=d("I64"))).to_string(s.threadKey),thread:s})},[v,w,s,u]),z=m(function(){t({body:h._("__JHASH__RPa59uyqDnD__JHASH__"),title:h._("__JHASH__QD3NL6bztov__JHASH__")},p)},[t,p]);a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatDeleteConversationDialog.react").__setRef("MWMessageRequestComposerBanner.react"));var A=a[0],B=c("MessengerWebUXLogger").useInteractionLogger();q=n(function(){return{label:h._("__JHASH__-p5reen4SU3__JHASH__"),onPress:function(){d("MessageRequestsLog").logActionTapped(s,2,w),y()}}},[w,s,y]);a=n(function(){return{label:h._("__JHASH__9sXJViR2MXn__JHASH__"),onPress:function(){d("MessageRequestsLog").logActionTapped(s,10),B==null?void 0:B({eventName:"leave_group",threadKey:s.threadKey,threadType:s.threadType}),z()}}},[s,B,z]);var C=b?a:q;a=h._("__JHASH__lzIMTtzL2x8__JHASH__");b?(q=e?h._("__JHASH__Zo8nGcr-Wbu__JHASH__"):void 0,a=e?h._("__JHASH__dGW95F1FSGX__JHASH__"):c("MessengerMSplitFlag").is_msplit_account?h._("__JHASH__MWNB1ho8ez7__JHASH__"):h._("__JHASH__8Xn13sU52xi__JHASH__")):(q=f?h._("__JHASH__CEpoRXODTMn__JHASH__"):void 0,f?i!=null&&r!=null?a=h._("__JHASH__WhaEH6LWAgw__JHASH__",[h._param("XACDisplayName",i),h._param("XACSecondaryName",r)]):i==null&&r!=null?a=h._("__JHASH__qZp511P-lrQ__JHASH__",[h._param("XACDisplayName",r)]):a=h._("__JHASH__UMff0aQK9RN__JHASH__"):a=i!=null?h._("__JHASH__PiWKQUwgi8l__JHASH__",[h._param("Composer info message",c("MessengerMSplitFlag").is_msplit_account||g?d("MWMessageRequestSharedTexts.react").getFBUserInfoTextMessageForMSplit(i):d("MWMessageRequestSharedTexts.react").getFBUserInfoTextMessage(i))]):h._("__JHASH__5qC4Qq1WTkB__JHASH__"));b=n(function(){return{label:C.label,onPress:C.onPress,size:32,type:"secondary"}},[C.label,C.onPress]);e=n(function(){return{label:h._("__JHASH__OllJcbQyTkT__JHASH__"),onPress:function(){d("MessageRequestsLog").logActionTapped(s,8,w),A(x)},size:32,type:"secondary"}},[A,w,s,x]);return l.jsx(c("MWXComposerBanner.react"),{bodyText:a,buttons:[b,e],headerText:q,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWPArmadilloLoadingStateMessage.react",["fbt","MWXSpinner.react","cr:6285","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){a=a.threadKey;a=b("cr:6285")(a);return a?null:j.jsxs("div",{id:"armadillo-loading-indicator-banner",children:[j.jsx("div",{className:"x78zum5 xoverlg xl56j7k xr1496l",children:j.jsx(c("MWXSpinner.react"),{color:"disabled",size:20})}),j.jsx("div",{className:"x6s0dn4 x12scifz x1jchvi3 x117nqv4 x1hkbg2g xr1yuqi xkrivgy x4ii5y1 x1gryazu x1qs4qq1 x1n2onr6 x2b8uid x13faqbe",children:h._("__JHASH__7VvIEysTDk2__JHASH__").toString()})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWPComposerPlaceholder.react",["CometPlaceholder.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a){a=a.height;return i.jsx("div",{className:"x1exxf4d x13fuv20 x178xt8z",style:{height:a.toString()+"px"}})}j.displayName=j.name+" [from "+f.id+"]";function a(a){var b=a.children;a=a.height;return i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(j,{height:a}),children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPFeatureLimitLoggingUtils",["I64","Int64Hooks","LSFeatureLimitsType","LSIntEnum","LSMessagingThreadTypeUtil","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MwbActorExperienceEventFalcoEvent").__setRef("MWPFeatureLimitLoggingUtils");function a(a,b,c){var e=k(c);return d("Int64Hooks").useCallbackInt64(function(){var c;l({action:1,restriction_type:a,surface:e,thread_id:(h||(h=d("I64"))).to_string((c=b)!=null?c:(h||(h=d("I64"))).zero)})},[b,a,e])}function b(a,b,c){var e=k(c);return d("Int64Hooks").useCallbackInt64(function(){var c;l({action:2,restriction_type:a,surface:e,thread_id:(h||(h=d("I64"))).to_string((c=b)!=null?c:(h||(h=d("I64"))).zero)})},[b,a,e])}function e(a){if(a)if((h||(h=d("I64"))).equal(a.type_,(i||(i=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND_PRIVATE)))return 40;else if((h||(h=d("I64"))).equal(a.type_,(i||(i=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND_PUBLIC)))return 39;else return 6;return 0}function k(a){if(a){var b=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),c=d("LSMessagingThreadTypeUtil").isOneToOne(a);if(c)return b?"messenger_encrypted_direct_thread":"messenger_direct_thread_details";c=d("LSMessagingThreadTypeUtil").isGroup(a);a=d("LSMessagingThreadTypeUtil").isPublicCMThread(a);if(c)return b?"messenger_encrypted_group_thread":a?"messenger_public_cm_chat":"messenger_group_thread_details"}return"unknown"}function l(a){var b=a.action,c=a.restriction_type,d=a.surface,e=a.thread_id;j.onReady(function(a){return a.log(function(){return{action:b,restriction_type:c,surface:d,thread_id:e}})})}g.useLogFeatureLimitComposerImpression=a;g.useLogViewCommunityStandards=b;g.getRestrictionTypeFromFeatureLimit=e}),98);
__d("useMWPFeatureLimitComposerBlockHeaderText",["fbt","I64","useServerTime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=60*60*1e3,k=24*j,l=23*j,m=1e3;function a(a,b){var e=c("useServerTime")().valueOf();a=a!=null?(i||(i=d("I64"))).to_float(a.expirationTimestampSeconds)*1e3:e;a=a-e;if(a<=l){e=Math.ceil(Math.max(a,j)/j);return b?h._("__JHASH__MtDrzd4mllU__JHASH__",[h._plural(e,"number")]):h._("__JHASH__Oh7AJclyvOB__JHASH__",[h._plural(e,"number")])}else{e=Math.ceil(Math.max(a,k)/k);return e>=m?h._("__JHASH__XJkVHKZY5be__JHASH__"):b?h._("__JHASH__DoFdcIuVM_E__JHASH__",[h._plural(e,"number")]):h._("__JHASH__RWH0KbM4haJ__JHASH__",[h._plural(e,"number")])}}g["default"]=a}),226);
__d("MWPFeatureLimitsBlockedComposer.react",["fbt","I64","LSFeatureLimitsType","LSIntEnum","MWBlockedComposerLogging","MWPActor.react","MWPFeatureLimitLoggingUtils","MWPFeatureLimitedData","MWXComposerBanner.react","react","useMWPFeatureLimitComposerBlockHeaderText","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||d("react");function a(a){a=a.thread;d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(a==null?void 0:a.threadKey,d("MWBlockedComposerLogging").ComposerBlockingReason.FEATURE_LIMITED_TO_READONLY);var b=d("MWPFeatureLimitedData").useReadOnlyFeatureLimitDataWithThreadType(a==null?void 0:a.threadType),e=d("MWPActor.react").isAPPlus();e=b!=null&&(j||(j=d("I64"))).equal(b.type_,(k||(k=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND_PUBLIC))&&e;var f=c("useMWPFeatureLimitComposerBlockHeaderText")(b,e);b=d("MWPFeatureLimitLoggingUtils").getRestrictionTypeFromFeatureLimit(b);var g=d("MWPFeatureLimitLoggingUtils").useLogFeatureLimitComposerImpression(b,a==null?void 0:a.threadKey,a==null?void 0:a.threadType);b=d("MWPFeatureLimitLoggingUtils").useLogViewCommunityStandards(b,a==null?void 0:a.threadKey,a==null?void 0:a.threadType);a=c("useSinglePartialViewImpression")({onImpressionStart:g});g=h._("__JHASH__7_EenTF_FJG__JHASH__");var i=h._("__JHASH__phCVAIUGUlz__JHASH__"),m={target:"_blank",url:"https://www.facebook.com/communitystandards/"},n=e?h._("__JHASH__9oilSt_qVYo__JHASH__"):h._("__JHASH___Q1doHhXtgm__JHASH__");return l.jsx("div",{ref:a,children:l.jsx(c("MWXComposerBanner.react"),{bodyText:e?i:g,buttons:[{label:n,linkProps:m,onPress:b}],headerText:f})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWSeparatorContainer.react",["react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.beforeContent,c=a.children,e=a.separator;a=a.xstyle;c=i.Children.toArray(c).filter(Boolean);return c.length===0?null:i.jsxs(i.Fragment,{children:[(b=b)!=null?b:null,i.jsx(d("react-strict-dom").html.div,{style:a,children:c.map(function(a,b){return i.jsxs(i.Fragment,{children:[b!==0&&e,a]},"item-"+b)})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXIconDragHandle",["MWXSvgIcon","SVGIcon","cr:9123","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9123")),c("gkx")("23219"));g["default"]=a}),98);
__d("useMWV2DisabledPageComposerSendMenuItem",["LSFactory","LSIntEnum","LSMailboxType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSShape","LSThreadAttributionTypeUtil","MWPActor.react","MessagePowerUp","promiseDone","react","useLSMessagingSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useCallback;function a(){var a=(h||(h=c("useReStore")))(),b=d("MWPActor.react").useActor(),e=c("useLSMessagingSource")();return k(function(g,h,j){c("promiseDone")(a.runInTransaction(function(a){var f=d("LSThreadAttributionTypeUtil").getSource(g,e);return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(a),{extraSendMessageParams:d("LSShape").ofRecord({calculate_denormalizations:!0,mark_read:!0,platform_token:j,power_up_style:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),reply_source_type:i.ofNumber(c("LSMessageReplySourceType").MESSAGE),reply_source_type_v2:i.ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE),snippet_has_emoji:!1,source:f}),mailboxType:i.ofNumber(c("LSMailboxType").MESSENGER),senderId:b,snippet:h,text:h,threadKey:g,threadType:i.ofNumber(1)})},"readwrite",void 0,void 0,f.id+":41"))},[a,e,b])}g["default"]=a}),98);
__d("MWV2DisabledPageComposer.react",["fbt","JSResourceForInteraction","MWBlockedComposerLogging","MWXButton.react","MWXIconDragHandle","MWXLazyPopoverTrigger.react","react","useMWV2DisabledPageComposerSendMenuItem"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("JSResourceForInteraction")("LSComposerPersistentMenu.react").__setRef("MWV2DisabledPageComposer.react");function a(a){var b=a.threadKey;d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(b,d("MWBlockedComposerLogging").ComposerBlockingReason.PAGE_THREAD_DISABLED);var e=c("useMWV2DisabledPageComposerSendMenuItem")();a=function(a){var c=a.title;a=a.id;if(a!=null)return e(b,c,a)};return j.jsx(c("MWXLazyPopoverTrigger.react"),{align:"middle",popoverProps:{onClose:function(){},onSelect:a},popoverResource:k,children:function(a,b){return j.jsx("div",{className:"x78zum5 xu06os2 xvijh9v xz9dl7a xn6708d xsag5q8 x1ye3gou",ref:a,children:j.jsx(c("MWXButton.react"),{icon:c("MWXIconDragHandle"),label:h._("__JHASH__pzPWkkyVYqg__JHASH__"),onPress:b,reduceEmphasis:!0})})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWV2ErrorComposer.react",["fbt","MDSTextPairing.react","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx("div",{className:"xcrg951 x8cjs6t x13fuv20 x178xt8z x1a8lsjc xl521sm x9mfa4r x889kno",children:j.jsx(c("MDSTextPairing.react"),{headline:h._("__JHASH__viCgEPmOyD5__JHASH__"),headlineColor:"secondary",level:4,meta:j.jsx(c("MWXText.react"),{numberOfLines:2,type:"meta3",children:h._("__JHASH__FrvKCKsD46D__JHASH__")}),reduceEmphasis:!0,textAlign:"center"})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWXACSunsettedComposer.react",["fbt","BaseTheme.react","MWXLink.react","MWXText.react","MWXTextPairing.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={dark:{"primary-text":"#e4e6eb","secondary-text":"#b0b3b8"},light:{"primary-text":"rgba(0, 0, 0, 0.7)","secondary-text":"rgba(0, 0, 0, 0.5)"},type:"VARIABLES"};function a(){var a=h._("__JHASH__E5yAiYeCVHB__JHASH__",[h._param("=Learn more",j.jsx(c("MWXLink.react"),{href:"https://www.facebook.com/help/messenger-app/619453488713104?ref=learn_more",children:j.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:h._("__JHASH__W_KwwnBzw9K__JHASH__")})}))]);return j.jsx("div",{className:"x1exxf4d x13fuv20 x178xt8z xqy66fx xc73u3c xx6bls6 x5ib6vp",children:j.jsx(c("BaseTheme.react"),{config:k,children:j.jsx(c("MWXTextPairing.react"),{body:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:a}),level:4,textAlign:"center"})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWXIconPhotoPlus",["MWXSvgIcon","SVGIcon","cr:9249","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9249")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXComposerAttachmentPreview.react",["fbt","MWXCircleButton.react","MWXIconCross","MWXIconDocument","MWXIconPhotoPlus","MWXIconStrict.react","MWXImage.react","MWXPressable.react","MWXText.react","MWXTooltip.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={cancelButton:{end:"xoo4vsp",left:null,right:null,position:"x10l6tqk",top:"x1v4kod4",$$css:!0},card:{marginEnd:"xq8finb",marginLeft:null,marginRight:null,position:"x1n2onr6",$$css:!0},contentWrapper:{backgroundColor:"x1qhmfi1",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"xsdox4t",minWidth:"x900493",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},filePreview:{alignItems:"x6s0dn4",boxSizing:"x9f619",display:"x78zum5",rowGap:"xp1r0qw",columnGap:"xtqikln",height:"xsdox4t",maxWidth:"x1kbpmyu",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",width:"xezivpi",$$css:!0},imagePreview:{alignItems:"x6s0dn4",display:"x78zum5",height:"xsdox4t",justifyContent:"xl56j7k",width:"x1useyqa",$$css:!0},playIcon:{marginStart:"x16hk5td",marginLeft:null,marginRight:null,marginTop:"x7wgvq7",position:"x10l6tqk",start:"xtzzx4i",left:null,right:null,top:"xwa60dl",$$css:!0}};function l(a){var b=a.hasError;b=b===void 0?!1:b;a=a.progress;if(a===1||a==null)return null;var c=4;b=b?"var(--negative)":"var(--chat-composer-button-color, var(--accent))";a=Math.ceil(a*100);var d=(c/2).toString();d="M 0,"+d+" L 100,"+d;return j.jsxs("svg",{"aria-hidden":!0,className:"x168nmei x13lgxp2 x30kzoy x9jhf4c x1ey2m1c x10l6tqk x17qophe xh8yej3",preserveAspectRatio:"none",style:{height:c.toString()},viewBox:"0 0 100 "+c.toString(),children:[j.jsx("path",{d:d,stroke:"rgba(0,0,0,.5)",strokeLinecap:"round",strokeWidth:c.toString()}),j.jsx("path",{d:d,stroke:b,strokeLinecap:"round",strokeWidth:(a===0?0:c).toString(),style:{strokeDasharray:"100",strokeDashoffset:(100-a).toString(),transition:"stroke-dashoffset .5s, stroke .5s"}})]})}l.displayName=l.name+" [from "+f.id+"]";function m(a){var b=a.children,e=a.hasError;e=e===void 0?!1:e;var f=a.onCancel;a=a.progress;return j.jsxs(d("react-strict-dom").html.div,{style:k.card,children:[j.jsxs(d("react-strict-dom").html.div,{style:k.contentWrapper,children:[b,j.jsx(l,{hasError:e,progress:a})]}),f!=null&&j.jsx(d("react-strict-dom").html.div,{style:k.cancelButton,children:j.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconCross"),label:h._("__JHASH__a2BigkmhfXY__JHASH__"),onPress:f,size:24,type:"overlay"})})]})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var b=a.hasError;b=b===void 0?!1:b;var d=a.onCancel,e=a.progress;a=a.src;return j.jsx(m,{hasError:b,onCancel:d,progress:e,children:j.jsx(c("MWXImage.react"),{objectFit:"contain",src:a,xstyle:k.imagePreview})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){var b=a.hasError;b=b===void 0?!1:b;var e=a.onCancel,f=a.progress;a=a.src;return j.jsxs(m,{hasError:b,onCancel:e,progress:f,children:[j.jsx("video",{className:"xl1xv1r",height:"48",src:a,width:"48"}),j.jsx(d("react-strict-dom").html.div,{style:k.playIcon,children:j.jsx(c("MWXImage.react"),{src:"/images/video/play_24dp.png"})})]})}b.displayName=b.name+" [from "+f.id+"]";function e(a){var b=a.hasError;b=b===void 0?!1:b;var e=a.onCancel,f=a.progress;a=a.title;return j.jsx(m,{hasError:b,onCancel:e,progress:f,children:j.jsx(c("MWXTooltip.react"),{position:"above",tooltip:a,children:j.jsxs(d("react-strict-dom").html.div,{style:k.filePreview,children:[j.jsx(c("MWXIconStrict.react"),{icon:c("MWXIconDocument"),size:20}),j.jsx(c("MWXText.react"),{numberOfLines:2,type:"bodyLink3",children:a})]})})})}e.displayName=e.name+" [from "+f.id+"]";function n(a){a=a.onPress;return j.jsx(m,{children:j.jsx(c("MWXPressable.react"),{onPress:a,xstyle:k.imagePreview,children:j.jsx(c("MWXIconStrict.react"),{icon:c("MWXIconPhotoPlus"),size:24})})})}n.displayName=n.name+" [from "+f.id+"]";g.MWXComposerImageAttachmentPreview=a;g.MWXComposerVideoAttachmentPreview=b;g.MWXComposerFileAttachmentPreview=e;g.MWXComposerAddAttachmentButton=n}),226);
__d("MWXComposerButtonContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({});g["default"]=b}),98);
__d("MWXComposerRow.react",["react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={padding12:{paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",$$css:!0},padding4:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},padding6:{paddingTop:"x1yrsyyn",paddingEnd:"xsyo7zv",paddingBottom:"x10b6aqq",paddingStart:"x16hj40l",$$css:!0},row:{alignItems:"xpqajaz",boxSizing:"x9f619",display:"x78zum5",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",position:"x1n2onr6",width:"xh8yej3",$$css:!0},scrollable:{contain:"x41o525",overflowX:"xw2csxc",overflowY:"x1odjw0f",$$css:!0}};function a(a){var b=a.children,c=a["data-testid"];c=a.padding;c=c===void 0?0:c;var e=a.scrollable;a=a.xStyle;return i.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,style:[j.row,c===12&&j.padding12,c===4&&j.padding4,c===6&&j.padding6,e===!0&&j.scrollable,a],children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerHeader.react",["MWXComposerButtonContext.react","MWXComposerRow.react","MWXText.react","MWXTextPairing.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={body:{alignItems:"x6s0dn4",borderTopColor:"x8cjs6t",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",paddingBottom:"x1120s5i",paddingStart:"xpkgp8e",paddingLeft:null,paddingRight:null,paddingEnd:"xmns6w2",paddingTop:"xz9dl7a",$$css:!0},rightAddon:{marginStart:"x1gryazu",marginLeft:null,marginRight:null,$$css:!0}},k={color:"secondary",size:24};function a(a){var b=a["data-testid"];b=a.headerText;var e=a.headerTextType,f=a.rightAddon;a=a.subtext;return i.jsxs(c("MWXComposerRow.react"),{"data-testid":void 0,xStyle:j.body,children:[(b!=null||a!=null)&&i.jsx(c("MWXTextPairing.react"),{body:b!=null&&e!=null?i.jsx(c("MWXText.react"),{type:e,children:b}):b!=null&&i.jsx(c("MWXText.react"),{type:"body4",children:b}),level:3,meta:a}),f!=null&&i.jsx(c("MWXComposerButtonContext.react").Provider,{value:k,children:i.jsx(d("react-strict-dom").html.div,{style:j.rightAddon,children:f})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerIconButton.react",["MWXCircleButton.react","MWXComposerButtonContext.react","MWXThreadThemeColor","MWXTooltip.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k={layoutWrapper:{flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",$$css:!0},marginBottom:function(a){return[{marginBottom:"xld31j7",$$css:!0},{"--marginBottom":function(a){return typeof a==="number"?a+"px":a!=null?a:"initial"}(a)}]},marginLeft:function(a){return[{marginLeft:"xwmvlbq",marginStart:null,marginEnd:null,$$css:!0},{"--marginLeft":function(a){return typeof a==="number"?a+"px":a!=null?a:"initial"}(a)}]},marginRight:function(a){return[{marginRight:"xy982vn",marginStart:null,marginEnd:null,$$css:!0},{"--marginRight":function(a){return typeof a==="number"?a+"px":a!=null?a:"initial"}(a)}]},marginTop:function(a){return[{marginTop:"x1v67u4u",$$css:!0},{"--marginTop":function(a){return typeof a==="number"?a+"px":a!=null?a:"initial"}(a)}]}};b=i.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.color,f=a.type;f=f===void 0?"deemphasized":f;var g=a.wrapperStyle,h=a.wrapperXStyle,l=babelHelpers.objectWithoutPropertiesLoose(a,["color","type","wrapperStyle","wrapperXStyle"]),m=j(c("MWXComposerButtonContext.react")),n=m.color,o=m.iconRatio;o=o===void 0?"medium":o;var p=m.marginBottom;p=p===void 0?0:p;var q=m.marginLeft;q=q===void 0?0:q;var r=m.marginRight;r=r===void 0?0:r;var s=m.marginTop;s=s===void 0?0:s;m=m.size;m=m===void 0?36:m;return i.jsx(d("react-strict-dom").html.div,{style:[k.marginBottom(p),k.marginLeft(q),k.marginRight(r),k.marginTop(s),k.layoutWrapper,[h,g]],children:i.jsx(c("MWXTooltip.react"),{position:"above",tooltip:a.label,children:i.jsx(c("MWXCircleButton.react"),babelHelpers["extends"]({},l,{color:(q=(p=e)!=null?p:n)!=null?q:d("MWXThreadThemeColor").mwxThreadThemeColor("var(--chat-composer-button-color, var(--accent))"),iconRatio:o,ref:b,size:m,type:f}))})})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("MWXComposerInputArea.react",["MWXComposerButtonContext.react","MWXComposerRow.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={colors:{backgroundColor:"x16sw7j7",borderTopStartRadius:"x107yiy2",borderTopEndRadius:"xv8uw2v",borderBottomEndRadius:"x1tfwpuw",borderBottomStartRadius:"x2g32xy",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",marginEnd:"x1w0mnb",marginLeft:null,marginRight:null,marginStart:"x1mnrxsn",$$css:!0},flexLayout:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"x13qp9f6",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},k={iconRatio:"large",marginBottom:0,marginLeft:0,marginRight:0,marginTop:0,size:28};function a(a){var b=a.children;a=a.header;return i.jsx(c("MWXComposerButtonContext.react").Provider,{value:k,children:i.jsxs(d("react-strict-dom").html.div,{style:[j.colors,j.flexLayout],children:[a,i.jsx(c("MWXComposerRow.react"),{padding:4,children:b})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerTextEditor.react",["CometLexicalContentEditable.react","CometLexicalPlaceholder.react","LexicalComposerContext","LexicalErrorBoundary","LexicalPlainTextPlugin","MWXRowItem.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback,k={padding:{marginBottom:"x12nagc",marginEnd:"x1w0mnb",marginLeft:null,marginRight:null,marginStart:"x1mnrxsn",marginTop:"x1gslohp",maxHeight:"xctk3hg",minWidth:"x900493",overflowY:"x1odjw0f",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",$$css:!0}};function a(a){var b=a.children,e=a.contentEditableProps,f=a.placeholderText;a=a.testid;var g=d("LexicalComposerContext").useLexicalComposerContext(),h=g[0];g=j(function(a){a=a==null?null:a;h.setRootElement(a)},[h]);f=i.jsx(c("CometLexicalPlaceholder.react"),{children:f});g=i.jsx(c("CometLexicalContentEditable.react"),babelHelpers["extends"]({contentEditableRef:g,editor:h,tabIndex:0,webDriverTestID:a},e));return i.jsxs(c("MWXRowItem.react"),{expanding:!0,verticalAlign:"center",xstyle:k.padding,children:[i.jsx(d("LexicalPlainTextPlugin").PlainTextPlugin,{ErrorBoundary:c("LexicalErrorBoundary"),contentEditable:g,placeholder:f}),b]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposer.react",["LexicalComposerContext","MWXComposerAttachmentPreview.react","MWXComposerHeader.react","MWXComposerIconButton.react","MWXComposerInputArea.react","MWXComposerRow.react","MWXComposerTextEditor.react","MWXTooltipGroup.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo,k={composer:{backgroundColor:"xt5xv9l",contain:"x6wvzqs",$$css:!0},flexLayout:{alignItems:"xpqajaz",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1c4vz4f",flexShrink:"xs83m0k",minWidth:"x13qp9f6",$$css:!0},padding:{paddingStart:"x1e558r4",paddingLeft:null,paddingRight:null,paddingEnd:"x150jy0e",paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",$$css:!0}};function a(a){var b=a.children,e=a.editor;a=a.header;var f=d("LexicalComposerContext").createLexicalComposerContext(),g=j(function(){return[e,f]},[e,f]);return i.jsx(d("LexicalComposerContext").LexicalComposerContext.Provider,{value:g,children:i.jsx(c("MWXTooltipGroup.react"),{children:i.jsxs(d("react-strict-dom").html.div,{style:[k.composer,k.flexLayout],children:[a,i.jsx(c("MWXComposerRow.react"),{xStyle:k.padding,children:b})]})})})}a.displayName=a.name+" [from "+f.id+"]";a.Button=c("MWXComposerIconButton.react");a.TextEditor=c("MWXComposerTextEditor.react");a.InputArea=c("MWXComposerInputArea.react");a.Header=c("MWXComposerHeader.react");a.Row=c("MWXComposerRow.react");a.Attachments={Add:d("MWXComposerAttachmentPreview.react").MWXComposerAddAttachmentButton,FilePreview:d("MWXComposerAttachmentPreview.react").MWXComposerFileAttachmentPreview,ImagePreview:d("MWXComposerAttachmentPreview.react").MWXComposerImageAttachmentPreview,VideoPreview:d("MWXComposerAttachmentPreview.react").MWXComposerVideoAttachmentPreview};b=a;g["default"]=b}),98);
__d("MWXComposerButtonGroupContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({isMenu:!1});g["default"]=b}),98);
__d("MWXComposerButtonGroupButton.react",["MWXComposerButtonGroupContext.react","MWXComposerIconButton.react","MWXMenuItem.react","MWXThreadThemeColor","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;b=i.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.color,f=a.icon,g=a.label,h=a.onPress,k=a.preventClosingMenuOnSelect,l=a.testid;l=babelHelpers.objectWithoutPropertiesLoose(a,["color","icon","label","onPress","preventClosingMenuOnSelect","testid"]);a=j(c("MWXComposerButtonGroupContext.react"));var m=a.isMenu,n=a.styleForButton;a=a.xstyleForButton;if(m){return i.jsx(c("MWXMenuItem.react"),babelHelpers["extends"]({"aria-label":g,icon:f.asMenuItemIcon_ESCAPE_HATCH(),iconColor:(m=e)!=null?m:d("MWXThreadThemeColor").mwxThreadThemeColor("var(--chat-composer-button-color, var(--accent))"),onClick:h,preventClosingMenuOnSelect:k,primaryText:g,ref:b,testid:void 0},l))}return i.jsx(c("MWXComposerIconButton.react"),babelHelpers["extends"]({icon:f,label:g,onPress:h,ref:b,testid:void 0,wrapperStyle:n,wrapperXStyle:a},e!=null?{color:e}:{},l))}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("withMWXPopover",["BaseMultiPageViewContext","BasePopoverTrigger.react","FDSMenuContext","MWXPopover.react","MWXPopoverLoadingState.react","lazyLoadComponent","react","tracePolicyFromResource","useCometPopoverInteractionTracing","withCometPlaceholder"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useContext,k=b.useMemo;function a(a){var b=function(b){var e=b.onHoverIn,f=b.onHoverOut,g=b.popover,h=b.popoverPresentationProps,l=b.popoverProps,m=b.preloadTrigger,n=babelHelpers.objectWithoutPropertiesLoose(b,["onHoverIn","onHoverOut","popover","popoverPresentationProps","popoverProps","preloadTrigger"]);b=(b=j(c("FDSMenuContext")))!=null?b:{};var o=b.onClose;b=(b=j(c("BaseMultiPageViewContext")))!=null?b:{};var p=b.pushPage,q=k(function(){return d("withCometPlaceholder").withCometPlaceholder(c("lazyLoadComponent")(g),i.jsx(c("MWXPopoverLoadingState.react"),{withArrow:!1}))},[g]);b=c("useCometPopoverInteractionTracing")(c("tracePolicyFromResource")("comet.popover",g),"lazy");h=(h=h)!=null?h:{};var r=h.align;r=r===void 0?"middle":r;var s=h.position;s=s===void 0?"above":s;h=babelHelpers.objectWithoutPropertiesLoose(h,["align","position"]);var t=k(function(){return function(a){return i.jsx(c("MWXPopover.react"),{withArrow:!0,children:i.jsx(q,babelHelpers["extends"]({},a))})}},[q]),u=k(function(){return function(a){return function(b){var c;b=b.onReturn;return i.jsx(q,babelHelpers["extends"]({},a,{onClose:(c=o)!=null?c:b}))}}},[q,o]);return i.jsx(c("BasePopoverTrigger.react"),babelHelpers["extends"]({align:r,position:s},h,{interactionTracker:b,popover:t,popoverPreloadResource:g,popoverProps:l,preloadTrigger:m,children:function(b,c,d,g,h){return i.jsx(a,babelHelpers["extends"]({onHoverIn:function(a){g(a),e==null?void 0:e(a)},onHoverOut:function(a){h(),f==null?void 0:f(a)}},n,{onPress:function(){p!=null&&o!=null?p(u(l)):c();for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];n.onPress==null?void 0:n.onPress.apply(n,b)},preventClosingMenuOnSelect:!0,ref:b}))}}))};return b}g["default"]=a}),98);
__d("MWXComposerButtonGroupPopoverButton.react",["MWXComposerButtonGroupButton.react","react","withMWXPopover"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");a=c("withMWXPopover")(c("MWXComposerButtonGroupButton.react"));b=a;g["default"]=b}),98);
__d("MWXIconFaceHappy",["MWXSvgIcon","SVGIcon","cr:9135","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9135")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXComposerEmojiButton.react",["fbt","JSResourceForInteraction","LexicalComposerContext","MWXComposerButtonGroupPopoverButton.react","MWXIconFaceHappy","Promise","promiseDone","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l=c("JSResourceForInteraction")("cometAddEmojiToComposerForLexical").__setRef("MWXComposerEmojiButton.react");function a(){var a=d("LexicalComposerContext").useLexicalComposerContext(),e=a[0];return k.jsx(c("MWXComposerButtonGroupPopoverButton.react"),{icon:c("MWXIconFaceHappy"),label:h._("__JHASH__450DFbxuM_0__JHASH__"),onPress:function(){l.preload()},popover:c("JSResourceForInteraction")("MWV2ComposerEmojiPickerForJSResource").__setRef("MWXComposerEmojiButton.react"),popoverProps:{onSelect:function(a){return c("promiseDone")(l.load(),function(c){c(a,e,16);return(i||(i=b("Promise"))).resolve()})},withArrow:!1},preloadTrigger:"button",testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWXIconChevronRight",["MWXSvgIcon","SVGIcon","cr:9090","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9090")),c("gkx")("23219"));g["default"]=a}),98);
__d("NaviconFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx("path",{fillRule:"nonzero",d:"M452.75 1077.5h6.5a.75.75 0 1 0 0-1.5h-6.5a.75.75 0 1 0 0 1.5zm0 3h6.5a.75.75 0 1 0 0-1.5h-6.5a.75.75 0 1 0 0 1.5zm0 3h6.5a.75.75 0 1 0 0-1.5h-6.5a.75.75 0 1 0 0 1.5z"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("PhotoAddFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs("g",{children:[i.jsx("path",{d:"M107.5 923.64a.682.682 0 0 1-.07-.003l-1.567-.146-.148 1.579a.75.75 0 0 1-1.493-.14l.148-1.579-1.43-.134a.75.75 0 0 1-.677-.816.744.744 0 0 1 .816-.677l1.431.134.133-1.428a.749.749 0 1 1 1.493.14l-.133 1.428 1.567.146a.75.75 0 0 1-.07 1.497m1.126-6.13-5.797-.51a1.512 1.512 0 0 0-1.63 1.377l-.693 7.966c-.035.402.088.794.347 1.104.26.31.622.501 1.022.537l5.795.51a1.485 1.485 0 0 0 1.098-.35c.308-.26.498-.625.533-1.027l.693-7.967a1.506 1.506 0 0 0-.347-1.104 1.494 1.494 0 0 0-1.022-.537",transform:"translate(352 157)"}),i.jsx("path",{d:"M100.27 927.842a2.528 2.528 0 0 1-.565-1.83l.165-1.926-.403-4.71a.183.183 0 0 1 .042-.132.178.178 0 0 1 .12-.065l.665-.06.09-1.037c.013-.167.046-.329.09-.484l-.973.087c-.437.038-.833.25-1.116.595a1.696 1.696 0 0 0-.379 1.227l.638 7.46c.038.448.245.853.582 1.142a1.61 1.61 0 0 0 1.2.389l.574-.052a2.456 2.456 0 0 1-.73-.604",transform:"translate(352 157)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("canMWAddMemberToGroupThread",["I64","LSIntEnum","LSThreadBitOffset","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){if(b)return!1;b=(h||(h=d("I64"))).equal(a.threadType,(i||(i=d("LSIntEnum"))).ofNumber(16));b=b&&a.needsAdminApprovalForNewParticipant===!1&&c("gkx")("33037");return d("LSThreadBitOffset").has(27,a)||b}g["default"]=a}),98);
__d("getMWPUnavailableComposerConfiguration",["LSMessagingThreadTypeUtil","MWBlockedComposerLogging","MWChatUnavailableComposer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,b,e){if(d("LSMessagingThreadTypeUtil").isOneToOne(b)&&e!=null){b=!e.isPage&&(!e.hasMessageCapability||!e.hasReplyMessageCapability);if(e.blockedSinceTimestampMs==null&&b)return i.jsx(c("MWChatUnavailableComposer.react"),{reason:e.hasMessageCapability?d("MWBlockedComposerLogging").ComposerBlockingReason.USER_BLOCKED_CANNOT_REPLY:d("MWBlockedComposerLogging").ComposerBlockingReason.USER_BLOCKED_CANNOT_MESSAGE,thread:{threadKey:a}})}}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useHasNonAddressableParticipantWAI",["CurrentMessengerUser","I64","MAWBridgeSendAndReceive","ODS","ReQL","ReQLSuspense","WAJids","WALogger","gkx","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["occam_reachable_with_no_wai_devices in "," (",")"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["occam_not_reachable_with_wai_devices in "," (",")"]);m=function(){return a};return a}b=k||d("react");var n=b.useEffect,o=b.useState;function a(a){var b=a.isComposerBlocked,e=a.isGroup,g=a.threadKey,k=(h||(h=c("useReStore")))();a=o(null);var p=a[0],q=a[1],r=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(k.tables.participants,["contactId"]).getKeyRange(g).map(function(a){a=a.contactId;return d("WAJids").toMsgrUserJid((i||(i=d("I64"))).to_string(a))})},[k,g],f.id+":43");n(function(){(c("gkx")("483")||c("gkx")("1302"))&&c("promiseDone")(d("MAWBridgeSendAndReceive").sendAndReceive("backend","getWAIDevices",{users:r}).then(function(a){var c=!1;for(var f=0;f<r.length;f++){var g=r[f];if(!a.has(g)){c=!0;break}else if(((g=a.get(g))==null?void 0:g.length)===0){c=!0;break}}g=e?"group":"1:1";f=d("CurrentMessengerUser").isTestUser()?"test user":"prod user";b&&!c?((j||(j=d("ODS"))).bumpEntityKey(3185,"mwchat_composer","occam_not_reachable_with_wai_devices in "+g+" ("+f+")"),d("WALogger").DEV(m(),g,f)):!b&&c&&((j||(j=d("ODS"))).bumpEntityKey(3185,"mwchat_composer","occam_reachable_with_no_wai_devices in "+g+" ("+f+")"),d("WALogger").DEV(l(),g,f));q(c)}))},[b,e,r]);return p}g.useHasNonAddressableParticipantWAI=a}),98);
__d("useLSMessagingInitiatingSourceNumber",["LSMessagingInitiatingSource","MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();if(a==null)return;else if(a==="Inbox")return c("LSMessagingInitiatingSource").FACEBOOK_INBOX;else if(a==="FullscreenChat")return c("LSMessagingInitiatingSource").FACEBOOK_FULLSCREEN;else if(a==="ChatTab")return c("LSMessagingInitiatingSource").FACEBOOK_CHAT;else return c("LSMessagingInitiatingSource").ROOMS_SIDE_CHAT}g["default"]=a}),98);
__d("useMAWCreateOptimisticSecureMessageV2",["I64","LSHotEmojiSize","LSIntEnum","MAWAdminMsg","MAWBumpThread","MAWCreateOptimisticSecureMessage","MAWLocalizationType","MAWOptimisticMessageUtils","MWPActor.react","QPLUserFlow","asyncToGeneratorRuntime","cr:2472","qpl","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(){var a=(j||(j=c("useReStore")))(),e=d("MWPActor.react").useActor();return function(g,j,k,l,m,n,o,p){return a.runInTransaction(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(f){var q=(yield d("MAWOptimisticMessageUtils").getOptimisticMessageTimestamp()),r=(h||(h=d("I64"))).of_float(q);o(p);var s=(yield d("MAWCreateOptimisticSecureMessage").createOptimisticMessageTxn(a,f,e,g,j,k,l,m,n,p,r,1,p));yield f.messages.add(s);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"after_create_optimistic_message",{instanceKey:m});s=b("cr:2472")==null?j:b("cr:2472").unvault(j);s=l!=null&&(h||(h=d("I64"))).equal(l,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL))&&s==="\ud83d\udc4d"?"(Y)":j;yield d("MAWBumpThread").threadMutation(f,k,r,r,d("MAWAdminMsg").buildLocalizedString([s],[],d("MAWLocalizationType").CURRENT_USER_SEND_TEXT),e);return{offlineMsgId:p,offlineMsgTimestamp:q}});return function(a){return f.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":59")}}g["default"]=a}),98);
__d("useMAWCreateOptimisticSecureMessageWithAttachments",["I64","LSAuthorityLevel","LSIntEnum","MAWAdminMsg","MAWBumpThread","MAWCreateOptimisticSecureMessage","MAWLocalizationType","MAWOptimisticMessageUtils","MWPActor.react","Promise","QPLUserFlow","asyncToGeneratorRuntime","qpl","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function a(){var a=(k||(k=c("useReStore")))(),e=d("MWPActor.react").useActor();return function(g,k,n,o,p,q,r,s){return r==null?(j||(j=b("Promise"))).resolve():a.runInTransaction(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var f=s;q(f);var j=(yield d("MAWOptimisticMessageUtils").getOptimisticMessageTimestamp()),t=(h||(h=d("I64"))).of_float(j),u=(yield d("MAWCreateOptimisticSecureMessage").createOptimisticMessageTxn(a,b,e,g,"",k,void 0,p,void 0,f,t,l(o.type)));yield b.messages.add(u);u={attachmentFbid:n,attachmentIndex:h.zero,attachmentType:r,authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),filename:o.filename,hasMedia:!0,hasXma:!1,isSharable:!1,messageId:f,offlineAttachmentId:n,previewUrl:o.url,threadKey:k,timestampMs:t,transportKey:"WhatsApp"};if(o.type==="image"||o.type==="animated_image"||o.type==="video"){var v;u=babelHelpers["extends"]({},u,{previewHeight:((v=o.thumbnailSpec)==null?void 0:v.height)?(h||(h=d("I64"))).of_float((v=o.thumbnailSpec)==null?void 0:v.height):void 0,previewWidth:((v=o.thumbnailSpec)==null?void 0:v.width)?(h||(h=d("I64"))).of_float((v=o.thumbnailSpec)==null?void 0:v.width):void 0})}yield b.attachments.add(u);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"after_create_optimistic_message",{instanceKey:p});v=m(o.type);v!=null&&(yield d("MAWBumpThread").threadMutation(b,k,t,t,v,e));return{offlineMsgId:f,offlineMsgTimestamp:j}});return function(a){return f.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":64")}}function l(a){switch(a){case"animated_image":return 16384;case"image":return 2;case"video":return 2;case"audio":return 4;case"document":return 64;default:return 1}}function m(a){switch(a){case"animated_image":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_GIF);case"image":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_IMAGE);case"video":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_VIDEO);case"audio":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_AUDIO);case"document":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_ATTACHMENT);default:return null}}g["default"]=a}),98);
__d("useMAWSendMessageV2",["I64","LSHotEmojiSize","LSIntEnum","MAWJobDefinitions","MAWTimedJob","MWPActor.react","MWPReplyContext.react","MWV2ComposerActionsContext.react","QPLUserFlow","WAJobOrchestratorTypes","asyncToGeneratorRuntime","qpl","react","requireDeferred","useLSMessagingInitiatingSourceNumber"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).useContext,l=c("requireDeferred")("MWLogSend").__setRef("useMAWSendMessageV2");function m(a){if(a==null)return;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL)))return 1;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM)))return 2;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE)))return 3}function a(){var a=d("MWPActor.react").useActor(),e=k(d("MWPReplyContext.react").MWPReplyContext),f=e.reply,g=c("useLSMessagingInitiatingSourceNumber")();e=k(d("MWV2ComposerActionsContext.react").MWV2ComposerActionsContext);var h=e.onMessageSendAttempt;return function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e,j,k,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){h==null?void 0:h(!0);j=babelHelpers["extends"]({content:o,initiatingSource:g,isFirstMsg:u,isForwarded:!1,openMessageOtid:q,openMessageParticipantCount:v,optimisticMsg:{msgId:r,ts:s},participantCount:w,s2sInstanceKey:A,s2sUserFlowQPLEvent:c("qpl")._(25313175,"1551"),source:p,specialTextSize:m(t)},x!=null&&{quote:x});y!=null&&(j.ephemeralSetting=y);z!=null&&(j.mentionedJids=[].concat(z));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"sending_message_to_wajob",{instanceKey:A});yield d("MAWTimedJob").TimedUIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMsg",{args:j,chatJid:n,externalId:B,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));l.onReady(function(c){var g=(i||(i=d("I64"))).to_string(e),h=t!=null?3:0;return c.log(b,{_mentionedJids:z,actor:a,attachmentFbids:[],attachmentType:h,backend:1,hasReply:f!=null,messagingThreadId:g,msgTtl:y==null?void 0:y.ephemeralExpirationInSec,offlineThreadingId:B,sendType:0,source:p,threadKey:e,threadType:k})})});return function(a,b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return e.apply(this,arguments)}}()}g["default"]=a}),98);
__d("useMarkOptimisticMessageAsFailed",["LSFactory","LSMarkOptimisticMessageFailedStoredProcedure","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=(h||(h=c("useReStore")))();return j(function(b,d){return a.runInTransaction(function(a){return c("LSMarkOptimisticMessageFailedStoredProcedure")(c("LSFactory")(a),{errorMessage:d,optimisticMid:b})},"readwrite",void 0,void 0,f.id+":25")},[a])}g["default"]=a}),98);
__d("useMAWSendSecureAttachmentMessage",["FBLogger","Int64Hooks","LSDatabaseSingleton","MAWExternalId","MAWGetEphemeralSettings","MAWMediaManagerUtils","MAWSendFileMsgIfNecessary","MAWSendSecureMessageV2Utils","MAWStateContext.react","MWPActor.react","Promise","QPLUserFlow","WALoggerDeferred","WAStanzaUtils","asyncToGeneratorRuntime","qex","qpl","react","useLSMessagingInitiatingSourceNumber","useMAWCreateOptimisticSecureMessageWithAttachments","useMWLSDefaultThreadSource","useMarkOptimisticMessageAsFailed"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useContext;function a(a,b,c){return l(a,b,c,d("MAWMediaManagerUtils").MAWMediaManagerAttachments)}function l(a,b,c,e){var f=b.hasFile,g=b.hasImage;b=b.hasVideo;var h=null;if(b||g||f){b=a[a.length-1];h=d("WAStanzaUtils").toStanzaId(b.offlineAttachmentId)}else h=d("MAWExternalId").generateExternalId();c(h);g=a.reduce(function(a,b){var c=e.get(b.offlineAttachmentId);c!=null&&a.push([c,d("WAStanzaUtils").toStanzaId(b.offlineAttachmentId)]);return a},[]);return{attachmentOfflineId:h,attachments:g}}function e(){var a=d("MWPActor.react").useActor(),e=c("useMWLSDefaultThreadSource")(),f=d("MAWSendSecureMessageV2Utils").useMaybeCreateThreadForMAWSendSecurMessageV2(),g=c("useLSMessagingInitiatingSourceNumber")(),j=k(d("MAWStateContext.react").MAWNonRerenderingStateContext);return d("Int64Hooks").useCallbackInt64(function(){var j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(j){var k=j.externalAttachmentUrl,l=j.messageTypeParams,m=j.preparedAttachments,n=j.reply,o=j.s2sInstanceKey,p=j.stickerId,q=j.thread;j=j.voiceClip;l=l.hasAttachment;if(!l)return;l=m.attachmentOfflineId;m=m.attachments;var r=e(q.threadKey),s=(yield (h||(h=b("Promise"))).all([(i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton,f(q.threadKey)])),t=s[0];s=s[1];var u=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(s.jid,q.threadKey));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"fetch_ephemeral_settings",{instanceKey:o});l={actorId:a,attachmentOfflineId:l,attachments:m,db:t,ephemeralSetting:u,externalAttachmentUrl:k,initiatingSource:g,isFirstMsg:s.created,reply:n,s2sInstanceKey:o,source:r,stickerId:p,thread:q,threadId:s.chatId,voiceClip:j};return d("MAWSendFileMsgIfNecessary").sendFileMsgIfNecessary(t,l)});return function(a){return j.apply(this,arguments)}}(),[a,j,e,g,f])}function f(){var a=d("MWPActor.react").useActor(),e=c("useMWLSDefaultThreadSource")(),f=d("MAWSendSecureMessageV2Utils").useMaybeCreateThreadForMAWSendSecurMessageV2(),g=c("useLSMessagingInitiatingSourceNumber")(),j=k(d("MAWStateContext.react").MAWNonRerenderingStateContext),m=c("useMAWCreateOptimisticSecureMessageWithAttachments")(),n=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),o=c("useMarkOptimisticMessageAsFailed")();return d("Int64Hooks").useCallbackInt64(function(){var j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(j){var k=j.externalAttachmentUrl,p=j.lssTraceApi,q=j.mediaStagings,r=j.messageTypeParams,s=j.onGenerateOfflineMsgId,t=j.reply,u=j.s2sInstanceKey,v=j.stickerId,w=j.thread;j=j.voiceClip;var x=new Map();try{var y=r.hasAttachment;if(!y)return;var z=new Map();c("qex")._("874")===!0&&(p==null?void 0:p.addMarkerPoint("create_optimistic_message_start","AppTiming"),yield (h||(h=b("Promise"))).all(q.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("MAWMediaManagerUtils").MAWMediaManagerAttachmentsV2.get(a.offlineAttachmentId);b=b==null?void 0:b.optimisticMedia;if(b==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to find optimistic media attachment in useMAWSendSecureAttachmentMessage");return null}var e=d("MAWExternalId").generateExternalId();b=(yield m(t,w.threadKey,a.offlineAttachmentId,b,u,s,a.attachmentType,e));if(b==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message");return null}x.set(a.offlineAttachmentId,{externalId:e,offlineMsgId:b.offlineMsgId,offlineMsgTimestamp:b.offlineMsgTimestamp});n(b.offlineMsgId,b.offlineMsgTimestamp)});return function(b){return a.apply(this,arguments)}}())),p==null?void 0:p.addMarkerPoint("create_optimistic_message_end","AppTiming"));yield (h||(h=b("Promise"))).all(q.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("MAWMediaManagerUtils").MAWMediaManagerAttachmentsV2.get(a.offlineAttachmentId);if(b==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure media message: unable to find media attachment in useMAWSendSecureAttachmentMessage");return}yield b.processedMediaPromise.then(function(b){z.set(a.offlineAttachmentId,b)})});return function(b){return a.apply(this,arguments)}}()));y=l(q,r,s,z);p=y.attachmentOfflineId;r=y.attachments;y=e(w.threadKey);var A=(yield h.all([(i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton,f(w.threadKey)])),B=A[0];A=A[1];var C=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(A.jid,w.threadKey));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"fetch_ephemeral_settings",{instanceKey:u});p={actorId:a,attachmentOfflineId:p,attachments:r,db:B,ephemeralSetting:C,externalAttachmentUrl:k,initiatingSource:g,isFirstMsg:A.created,offlineAttachmentIdToMessageData:x,reply:t,s2sInstanceKey:u,source:y,stickerId:v,thread:w,threadId:A.chatId,voiceClip:j};return d("MAWSendFileMsgIfNecessary").sendFileMsgIfNecessary(B,p)}catch(a){var D=a instanceof Error?a.message:"Fail to send secure attachment message";x.forEach(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.offlineMsgId;yield o(a,D)});return function(b){return a.apply(this,arguments)}}());yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureAttachmentMessage"],["Send attachment message failed:"+JSON.stringify(a)],"ERROR");throw a}finally{q.map(function(a){return d("MAWMediaManagerUtils").MAWMediaManagerAttachmentsV2["delete"](a.offlineAttachmentId)})}});return function(a){return j.apply(this,arguments)}}(),[a,m,n,j,e,g,o,f])}g.prepareAttachmentsFromMediaManager_DEPRECATED=a;g.useMAWSendSecureAttachmentMessage_DEPRECATED=e;g.useMAWSendSecureAttachmentMessageV2=f}),98);
__d("useMAWSendSecureTextMessage",["MAWBridgeSendAndReceive","MAWDbMsg","MAWExternalId","MAWGetEphemeralSettings","MAWSendSecureMessageV2Utils","MAWStateContext.react","MAWVault","Promise","WALoggerDeferred","asyncToGeneratorRuntime","emptyFunction","promiseDone","react","useMAWCreateOptimisticSecureMessageV2","useMAWSendMessageV2","useMWLSDefaultThreadSource","useMarkOptimisticMessageAsFailed"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=c("useMWLSDefaultThreadSource")(),e=d("MAWSendSecureMessageV2Utils").useMaybeCreateThreadForMAWSendSecurMessageV2(),f=c("useMAWSendMessageV2")(),g=c("useMAWCreateOptimisticSecureMessageV2")(),i=c("useMarkOptimisticMessageAsFailed")(),k=d("MAWStateContext.react").useDispatchOptimisticSendMessage();return j(function(){var j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(j,l){var m=l.hotEmojiSize,n=l.lssTraceApi,o=l.mentionedJids,p=l.messageText,q=l.onGenerateOfflineMsgId,r=l.reply,s=l.s2sInstanceKey;l=l.thread;var t=d("MAWExternalId").generateExternalId(),u=null;try{var v;n==null?void 0:n.addMarkerPoint("create_optimistic_message_start","AppTiming");q=(yield (h||(h=b("Promise"))).all([e(l.threadKey),g(r,d("MAWVault").vault(p),l.threadKey,m,(v=s)!=null?v:0,o,(v=q)!=null?v:c("emptyFunction"),t)]));v=q[0];q=q[1];n==null?void 0:n.addMarkerPoint("create_optimistic_message_end","AppTiming");u=q.offlineMsgId;n=q.offlineMsgTimestamp;k(u,Date.now());q=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(v.jid,l.threadKey));var w=a(l.threadKey),x=null;if(r!=null){r=d("MAWDbMsg").toMsgId(r.messageId);r!=null&&(x=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:r})))}return f(j,l.threadKey,v.chatId,l.threadType,v.jid,p,w,void 0,u,n,m,v.created,void 0,void 0,x,q,o,s,t)}catch(a){r=a instanceof Error?a.message:"Fail to send secure text message";u!=null&&c("promiseDone")(i(u,r));yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureTextMessage"],["Send text message failed:"+JSON.stringify(a)],"ERROR");throw a}});return function(a,b){return j.apply(this,arguments)}}(),[g,k,a,i,e,f])}g["default"]=a}),98);
__d("useMAWSendSecureLinkXMAMessage",["FBLogger","Int64Hooks","MAWBridgeSendAndReceive","MAWDbMsg","MAWExternalId","MAWExternalLinkUtil","MAWFindFirstUrl","MAWSendSecureMessageV2Utils","asyncToGeneratorRuntime","useMAWSendSecureTextMessage","useMWLSDefaultThreadSource"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useMWLSDefaultThreadSource")(),e=d("MAWSendSecureMessageV2Utils").useMaybeCreateThreadForMAWSendSecurMessageV2(),f=c("useMAWSendSecureTextMessage")();return d("Int64Hooks").useCallbackInt64(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,g){var h=g.mentionedJids,i=g.messageText,j=g.onGenerateOfflineMsgId,k=g.reply,l=g.s2sInstanceKey,m=g.thread;g=g.threadKey;var n=d("MAWFindFirstUrl").findFirstUrl(i);if(n==null||n.length===0)return f(b,{mentionedJids:h,messageText:i,onGenerateOfflineMsgId:j,reply:k,s2sInstanceKey:l,thread:m});try{b=n[0];h=d("MAWExternalLinkUtil").findFirstAvailableOembedUrlAndRequestPair(n);m=b.entity.url;n=null;if(h!=null){m=h.oEmbedUrl;try{n=(yield d("MAWExternalLinkUtil").getOembedResponse(h.oEmbedRequest))}catch(a){c("FBLogger")("messenger_web_sharing").catching(a).mustfix("[External link] Failed to send External Link XMA.")}}b=null;if(k!=null){h=d("MAWDbMsg").toMsgId(k.messageId);h!=null&&(b=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:h})))}k=d("MAWExternalId").generateExternalId();j==null?void 0:j(k);h=a(g);j=(yield e(g));return d("MAWExternalLinkUtil").sendExternalLinkXMA(i,n,m,j.jid,l,h,g,k,(i=b)!=null?i:void 0)}catch(a){c("FBLogger")("messenger_web_sharing").catching(a).mustfix("[External link] Failed to send external link XMA ");throw a}});return function(a,b){return g.apply(this,arguments)}}(),[a,e,f])}g["default"]=a}),98);
__d("useMAWUpdateThreadCapabilities",["LSMessagingThreadTypeUtil","MAWUpdateLSThreadCapabilities","Promise","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useCallback;function a(){var a=(i||(i=c("useReStore")))();return k(function(c){return!d("LSMessagingThreadTypeUtil").isOneToOne(c.threadType)?(h||(h=b("Promise"))).resolve():a.runInTransaction(function(a){return d("MAWUpdateLSThreadCapabilities").updateNonMessageRequestThreadTxn(a,c.threadKey)},"readwrite",void 0,void 0,f.id+":37")},[a])}g["default"]=a}),98);
__d("useMAWSendSecureMessageV2Impl",["FBLogger","I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","MAWOptimisticUpdateContactRelationship","MWLSLogSend","MWPActor.react","MWPReplyContext.react","MWPreloadableQueries","MWSharedMsgLogUtils","MWVersion","MessageRequestsLog","Promise","ReQL","WALoggerDeferred","asyncToGeneratorRuntime","qex","react","sendToSentQPLLogger","sendToSentQPLUtils","useAsyncReStore","useLSMessagingInitiatingSource","useMAWSendSecureAttachmentMessage","useMAWSendSecureLinkXMAMessage","useMAWSendSecureTextMessage","useMAWUpdateThreadCapabilities","useMWLSUnarchiveThread"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||d("react")).useContext;function a(a){var e=d("MWPActor.react").useActor(),f=l(d("MWPReplyContext.react").MWPReplyContext),g=f.clearReply,i=c("useLSMessagingInitiatingSource")(),m=c("useAsyncReStore")(),n=c("useMAWSendSecureTextMessage")(),o=c("useMAWSendSecureLinkXMAMessage")(),p=d("useMAWSendSecureAttachmentMessage").useMAWSendSecureAttachmentMessage_DEPRECATED(),q=d("useMAWSendSecureAttachmentMessage").useMAWSendSecureAttachmentMessageV2(),r=c("useMWLSUnarchiveThread")(),s=c("useMAWUpdateThreadCapabilities")();return d("Int64Hooks").useCallbackInt64(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(f){var l=f.externalAttachmentUrl,t=f.hotEmojiSize,u=f.lssTraceApi,v=f.mentionedJids,w=f.messageText,x=f.reply,y=f.s2sInstanceKey,z=y===void 0?0:y;y=f.stickerId;var A=f.thread;f=f.voiceClip;yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer"],["Starting message send"],"LOG");d("sendToSentQPLLogger").markSendToSentPoint(z,"send_secure_message_started");u.addMarkerPoint("send_secure_message_started","AppTiming");var B=(yield m),C=d("LSMessagingThreadTypeUtil").isMessageRequest(A),D=(j||(j=d("I64"))).equal(A.parentThreadKey,(k||(k=d("LSIntEnum"))).ofNumber(-10)),E=(yield d("ReQL").toArrayAsync(d("MWPreloadableQueries").getMediaStagingQuery(B,A.threadKey))),F=d("MWSharedMsgLogUtils").getMessageTypeParams(w,t,x,y,l,f,E);d("sendToSentQPLLogger").addSendToSentAnnotations(z,yield d("MWSharedMsgLogUtils").getSendToSentAnnotations(A,F,i));d("MWSharedMsgLogUtils").addSendMessageMetadataForInteractionTrace(u,F,A,i);var G=function(a){d("MWLSLogSend").logSentHeroInteraction(u,a,{initiatingSource:i,isMessageRequest:C,mwVersion:d("MWVersion").v2,threadType:A.threadType}),d("sendToSentQPLLogger").markSendToSentPoint(z,"offline_msg_id_generated"),d("sendToSentQPLUtils").setS2sKeyForOfflineMessageId(a,z)},H=[],I=F.hasAttachment,J=F.hasLinks;w!=null&&w!==""&&(J?H.push(o(B,{mentionedJids:v,messageText:w,onGenerateOfflineMsgId:I?void 0:G,reply:x,s2sInstanceKey:z,thread:A,threadKey:A.threadKey})):H.push(n(B,{hotEmojiSize:t,lssTraceApi:u,mentionedJids:v,messageText:w,onGenerateOfflineMsgId:I?void 0:G,reply:x,s2sInstanceKey:z,thread:A})));if(I)if(c("qex")._("460")===!0)H.push(q({externalAttachmentUrl:l,lssTraceApi:u,mediaStagings:E,messageTypeParams:F,onGenerateOfflineMsgId:G,reply:x,s2sInstanceKey:z,stickerId:y,thread:A,voiceClip:f}));else{t=d("useMAWSendSecureAttachmentMessage").prepareAttachmentsFromMediaManager_DEPRECATED(E,F,G);H.push(p({externalAttachmentUrl:l,messageTypeParams:F,preparedAttachments:t,reply:x,s2sInstanceKey:z,stickerId:y,thread:A,voiceClip:f}))}a();g(A.threadKey,!1);yield (h||(h=b("Promise"))).all(H)["catch"](function(a){d("sendToSentQPLLogger").markSendToSentFail(z,a);a instanceof Error?c("FBLogger")("messenger_web_messaging").catching(a).addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","hasAttachment: "+I.toString()).mustfix("Failed while sending secure message in useMAWSendSecureMessageV2Impl"):c("FBLogger")("messenger_web_messaging").addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","hasAttachment: "+I.toString()).mustfix("Failed while sending secure message in useMAWSendSecureMessageV2Impl, %s",a.message);throw a});w!=null&&w!==""&&J&&d("sendToSentQPLLogger").markSendToSentSuccess(z);yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer"],["Send message is done"],"LOG");d("MAWOptimisticUpdateContactRelationship").call(A,B,e);yield s(A);C&&d("MessageRequestsLog").logActionConfirmed(A,1);D&&r(A.threadKey)});return function(a){return f.apply(this,arguments)}}(),[e,g,i,a,p,q,o,n,r,s,m])}g["default"]=a}),98);
__d("useMAWSendSecureMessageV2",["I64","MAWJids","MAWSendSecureMessageV2Utils","MWPReplyContext.react","WALoggerDeferred","promiseDone","qpl","react","sendToSentQPLLogger","unrecoverableViolation","useCometInteractionTracing","useMAWSendSecureMessageV2Impl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useContext;function a(a,b,e){var f=j(d("MWPReplyContext.react").MWPReplyContext),g=f.reply,h=c("useMAWSendSecureMessageV2Impl")(e),k=c("useCometInteractionTracing")(c("qpl")._(30605384,"573"),"fast","INTERACTION",void 0);return function(e,f,j,l,m,n,o,p,q,r){c("promiseDone")(d("WALoggerDeferred").logWithTags(["Composer"],["Calling useMAWSendSecureMessageV2"],"LOG"));var s=f==null?void 0:f.map(function(a){return d("MAWJids").toUserJid(a.id)}),t=e;j!=null&&d("MAWSendSecureMessageV2Utils").isLikeStickerId((i||(i=d("I64"))).to_string(j))&&(t="\ud83d\udc4d");var u=d("sendToSentQPLLogger").markSendToSentStart();k(function(e){c("promiseDone")(h({externalAttachmentUrl:n,hotEmojiSize:l,lssTraceApi:e,mentionedJids:s,messageText:t,reply:g,s2sInstanceKey:u,stickerId:j,thread:a,voiceClip:p}),b,function(a){d("sendToSentQPLLogger").markSendToSentFail(u,a);e.failTrace(a,!0);throw c("unrecoverableViolation")("Encountered failure during Armadillo Message Send (UI)","messenger_web_messaging",{error:a})})})}}g["default"]=a}),98);
__d("useMWAddParticipantDialog",["JSResourceForInteraction","LSIntEnum","LSMessagingThreadTypeUtil","MWLSDatabaseLazySync","promiseDone","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=d("MWLSDatabaseLazySync").useSync((h||(h=d("LSIntEnum"))).ofNumber(7)),f=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWAddParticipantOpenDialog.react").__setRef("useMWAddParticipantDialog")),g=f[0];f=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MAWAddParticipantSecureDialog.react").__setRef("useMWAddParticipantDialog"));var i=f[0];return function(){c("promiseDone")(e());var f=d("LSMessagingThreadTypeUtil").isArmadilloSecure(b);f?i({threadKey:a}):g({threadKey:a})}}g["default"]=a}),98);
__d("useMWComposerEmojiTransform",["react","requireDeferred","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect,j=c("requireDeferred")("getUpgradedCometEmojiComposerHandler").__setRef("useMWComposerEmojiTransform");function a(a){var b=c("useDeferredModuleOnReady")(j);i(function(){return b==null?void 0:b(a,16)},[a,b])}g["default"]=a}),98);
__d("useMWComposerPersistentMenuItemSelect",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=a.onSendMessage;return i(function(a){var c=a.id;a=a.title;return b(a,void 0,void 0,void 0,void 0,void 0,void 0,void 0,c,void 0)},[b])}g["default"]=a}),98);
__d("useMWCutoverComposerConfiguration",["JSResourceForInteraction","LSMessagingThreadTypeUtil","MWBlockedComposerLogging","lazyLoadComponent","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWCutoverComposer.react").__setRef("useMWCutoverComposerConfiguration")),k=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWDualThreadCutoverComposer.react").__setRef("useMWCutoverComposerConfiguration"));function a(a,b,c,e,f,g){if((g||f)&&(!d("LSMessagingThreadTypeUtil").isOneToOne(b)||c!=null))return e?i.jsx(k,{otherUser:c,thread:{threadKey:a}}):i.jsx(j,{reason:c!=null?d("MWBlockedComposerLogging").ComposerBlockingReason.ARMADILLO_THREAD_ALREADY_CUTOVER:d("MWBlockedComposerLogging").ComposerBlockingReason.ARMADILLO_GROUP_THREAD_CUTOVER,thread:{threadKey:a}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWMediaManagerUploadFailedToast",["mwPushToast","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){return i(function(a,b){d("mwPushToast").mwPushErrorToast({body:b,title:a})},[])}g["default"]=a}),98);
__d("useOnTypingStateChanged",["I64","Int64Hooks","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSSendTypingIndicatorStoredProcedure","MWCMIsAnyCMThread","MWPActor.react","MessengerWebUXLogger","ReQL","asyncToGeneratorRuntime","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,c,d){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(1))&&!(i||(i=d("I64"))).equal(b,f)){var g;b=(yield (g=d("ReQL")).firstAsync(g.mergeJoin(g.fromTableAscending(a.tables.participants).getKeyRange(b),g.fromTableAscending(a.tables.contacts.index("blockedByViewerStatusId")).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))).filter(function(a){var b=a[0];a[1];return!(i||(i=d("I64"))).equal(b.contactId,f)})));return b!=null}else return!c("MWCMIsAnyCMThread")(e)});return l.apply(this,arguments)}function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=c("MessengerWebUXLogger").useInteractionLogger();return d("Int64Hooks").useCallbackInt64(function(h){if(!(i||(i=d("I64"))).ge(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)))return;c("promiseDone")(k(b,a.threadKey,a.threadType,e).then(function(e){if(e){g==null?void 0:g({eventName:"send_typing_indicators",threadKey:a.threadKey,threadType:a.threadType});return b.runInTransaction(function(b){return c("LSSendTypingIndicatorStoredProcedure")(c("LSFactory")(b),{isGroupThread:d("LSMessagingThreadTypeUtil").isGroup(a.threadType),isTyping:h,threadKey:a.threadKey})},"readwrite",void 0,void 0,f.id+":112")}}))},[a.authorityLevel,a.threadKey,a.threadType,b,e,g])}g["default"]=a}),98);
__d("useMWOnTypingStateChanged",["MWChatViewerChatVisibilityHook","react","useOnTypingStateChanged"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo,j=function(a){return void 0};function a(a){var b=c("useOnTypingStateChanged")(a),e=d("MWChatViewerChatVisibilityHook").useViewerChatVisibility();return i(function(){return e?b:j},[b,e])}g["default"]=a}),98);
__d("useMWPAdultMinorRestrictionLogging",["I64","LSContactReachabilityStatusType","LSIntEnum","LSMessagingThreadTypeUtil","MwbActorExperienceEventFalcoEvent","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).useEffect;function l(a){var b=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),c=d("LSMessagingThreadTypeUtil").isOneToOne(a);a=d("LSMessagingThreadTypeUtil").isGroup(a);if(c)return b?"messenger_encrypted_direct_thread":"messenger_direct_thread_details";return a?b?"messenger_encrypted_group_thread":"messenger_group_thread_details":"unknown"}function m(a){switch(a){case c("LSContactReachabilityStatusType").UNREACHABLE_USER_TYPE:return 12;case c("LSContactReachabilityStatusType").UNREACHABLE_ADULT_TYPE:return 21;default:return 0}}var n=function(a){return a?(i||(i=d("LSIntEnum"))).toNumber(a):c("LSContactReachabilityStatusType").REACHABLE};function a(a,b){var e=n(b),f=l(a),g=(j||(j=d("I64"))).to_string(a);k(function(){e!==c("LSContactReachabilityStatusType").REACHABLE&&e!==c("LSContactReachabilityStatusType").REACHABLE_INVITE_BANNER&&c("MwbActorExperienceEventFalcoEvent").log(function(){return{action:1,restriction_type:m(e),surface:f,thread_id:g}})},[g,e,f])}g["default"]=a}),98);
__d("useMWPComposerFileDropzoneRegisterHandler",["MWV2FileDropzone.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;function a(a){var b=i(d("MWV2FileDropzone.react").mWV2FileDropzoneContext);j(function(){if(a){b.current.enabled=!1;b.current.handler=null;return function(){b.current.enabled=!0,b.current.handler=null}}},[b,a])}g["default"]=a}),98);
__d("useMWPDisablePageComposerConfiguration",["MWV2DisabledPageComposer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){if(a.disableComposerInput&&a.hasPersistentMenu)return i.jsx(c("MWV2DisabledPageComposer.react"),{threadKey:a.threadKey})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPFeatureLimitsBlockedComposerConfiguration",["MWPFeatureLimitsBlockedComposer.react","isFeatureLimitEnabled","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,b,d){b=b&&(!a||c("isFeatureLimitEnabled")());if(b)return i.jsx(c("MWPFeatureLimitsBlockedComposer.react"),{thread:d})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPNullComposerConfiguration",["I64","LSNullstateCTAType","MWBlockedComposerLogging","MWPreloadedText","justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useContext;function l(a){var b=a.reason;a=a.threadKey;d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(a,b);return null}l.displayName=l.name+" [from "+f.id+"]";function a(a,b,e,f){var g=k(c("MWPreloadedText"));f=f!=null&&(i||(i=d("I64"))).equal(f,(i||(i=d("I64"))).of_float(c("LSNullstateCTAType").GET_STARTED))&&!g.text;g=!(i||(i=d("I64"))).equal(b,i.zero);b=c("justknobx")._("926");if(f&&!g||!b&&e)return j.jsx(l,{reason:e?d("MWBlockedComposerLogging").ComposerBlockingReason.GAMING_GAME_BOT:d("MWBlockedComposerLogging").ComposerBlockingReason.GAMING_GET_STARTED_CTA,threadKey:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPShouldShowRestrictedComposer",["LSMessagingThreadTypeUtil","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("LSMessagingThreadTypeUtil").isOneToOne(a)&&c("gkx")("24036")&&b}g["default"]=a}),98);
__d("useMWProactiveWarningPayloadMemo",["I64","Int64Hooks"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.banner,c=a.ignoreDismissTime,e=a.isPWDismissTimeSet,f=a.pwSettings,g=a.threadKey;return d("Int64Hooks").useMemoInt64(function(){if(f==null||b==null)return;var a=f.context,i=f.entryPoint,j=f.storyLocation,k=f.suspectId,l=f.tag,m=b.bannerId,n=b.cta1Title,o=b.cta2Title,p=b.heading,q=b.titleSectionOne;if(!((Boolean(c)||e)&&(h||(h=d("I64"))).equal(m,(h||(h=d("I64"))).of_string("7"))))return;if(k!=null&&a!=null&&j!=null&&i!=null&&l!=null&&p!=null&&o!=null&&n!=null&&q!=null)return{context:a,cta1Title:n,cta2Title:o,description:q,falco_event_data:{data:{entry_point:(h||(h=d("I64"))).to_int32(i),feedback_tags:[l],surface:h.to_int32(j)},impersonatedUser:{id:"0"},otherUser:{id:h.to_string(k)},reportedUser:{id:"0"},thread:{id:h.to_string(g),type:1}},header:p,threadKey:g}},[g,b,f,e,c])}g["default"]=a}),98);
__d("useMWV2ComposerOnPressVoiceClip",["$InternalEnum","JSResourceForInteraction","WAGetMediaDevicesSupportedConstraints","emptyFunction","gkx","react","requireDeferred","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useState,j=c("requireDeferred")("MWChatAudioLog").__setRef("useMWV2ComposerOnPressVoiceClip"),k=b("$InternalEnum").Mirrored(["AWAITING","GRANTED","DENIED","FAILED"]);function a(a){var b=i(k.AWAITING),e=b[0],f=b[1];b=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatAudioRecorderPermissionsDialog.react").__setRef("useMWV2ComposerOnPressVoiceClip"));var g=b[0],h={},l=c("gkx")("24131"),m=((b=d("WAGetMediaDevicesSupportedConstraints").getMediaDevicesSupportedConstraints())==null?void 0:b.sampleRate)===!0&&c("gkx")("9179");l&&(h.channelCount=1);m&&(h.sampleRate=44100);var n=function(){return g({contentType:"accessDenied",onAllow:c("emptyFunction")},c("emptyFunction"))},o=function(){var b;(b=navigator)==null?void 0:(b=b.mediaDevices)==null?void 0:b.getUserMedia({audio:l||m?h:!0,video:!1}).then(function(b){f(k.GRANTED),a.start(b)})["catch"](function(a){a.name==="NotAllowedError"?(f(k.DENIED),n()):f(k.FAILED),j.onReady(function(a){return a.logBrowserDenyAccess()})})},p=function(){return g({contentType:"askForAccess",onAllow:function(){return o()}},c("emptyFunction"))};return function(){var a;switch(e){case k.AWAITING:a=(a=navigator.permissions)==null?void 0:a.query({name:"microphone"});a!=null?a.then(function(a){a=a.state;switch(a){case"denied":f(k.DENIED);n();break;case"granted":o();break;case"prompt":p();break;default:p()}})["catch"](function(){p()}):(o(),j.onReady(function(a){return a.logMicAccessCheckFailed()}));return;case k.DENIED:return n();case k.GRANTED:case k.FAILED:return o()}}}g["default"]=a}),98);
__d("useMWXComposerClearAndSendOnEnter",["Lexical","MLCKeyBindingUtil","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useInsertionEffect,k=b.useLayoutEffect,l=b.useRef;function a(a,b){var e=a.clearReplyState,f=a.editor,g=a.onSend,h=l(b);j(function(){h.current=b},[b]);var m=i(function(){g(h.current),e==null?void 0:e(),f.dispatchCommand(d("Lexical").CLEAR_EDITOR_COMMAND)},[g,e,f]);k(function(){return f.registerCommand(d("Lexical").KEY_ENTER_COMMAND,function(a){if(a!=null&&!a.shiftKey&&!a.altKey&&(!c("gkx")("23402")||d("MLCKeyBindingUtil").hasCommandModifier(a))){a.preventDefault();m();return!0}return!1},d("Lexical").COMMAND_PRIORITY_LOW)},[f,m]);return{onSend:m}}g["default"]=a}),98);
__d("useMWXLexicalEditor",["CometLexicalEmojiNode","Lexical","MessengerLexicalActorNode","cometLexicalBaseTheme","cr:3101","cr:6138","useLexicalInitializeEditor__DEPRECATED","useMWPLexicalClearEditor","useStable"],(function(a,b,c,d,e,f,g){"use strict";e=b("cr:3101")||b("cr:6138");var h=[d("MessengerLexicalActorNode").MessengerLexicalActorNode,e==null?void 0:e.MessengerLexicalCommandNode,d("CometLexicalEmojiNode").EmojiNode];function a(){var a=c("useStable")(function(){return d("Lexical").createEditor({namespace:"MWPEditor",nodes:h.filter(Boolean),onError:function(){},theme:babelHelpers["extends"]({},c("cometLexicalBaseTheme"),{paragraph:"xat24cr xdj266r"})})});c("useMWPLexicalClearEditor")(a);c("useLexicalInitializeEditor__DEPRECATED")(a);return{editor:a}}g.useMWXLexicalEditor=a}),98);
__d("useMessageRequestDeleteConversation",["Int64Hooks","LSFactory","LSIntEnum","LSOptimisticRemoveThreadStoredProcedure","LSThreadRemoveType","MWChatStateActions","MWChatStateV2.react","MessageRequestsLog","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=(i||(i=c("useReStore")))(),e=d("MWChatStateV2.react").useDispatch();return d("Int64Hooks").useCallbackInt64(function(){d("MessageRequestsLog").logActionConfirmed(a,8),c("promiseDone")(b.runInTransaction(function(b){return c("LSOptimisticRemoveThreadStoredProcedure")(c("LSFactory")(b),{removeType:(h||(h=d("LSIntEnum"))).ofNumber(c("LSThreadRemoveType").DELETE_THREAD),threadKey:a.threadKey})},"readwrite",void 0,void 0,f.id+":42"),function(){return e(d("MWChatStateActions").closeTabByThreadKey(Date.now(),a.threadKey))})},[b,a,e])}g["default"]=a}),98);
__d("useMessageRequestLeaveGroup",["Int64Hooks","LSFactory","LSOptimisticRemoveParticipantsFromGroupThreadStoredProcedure","LSVec","MWPActor.react","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWPActor.react").useActor();return d("Int64Hooks").useCallbackInt64(function(){c("promiseDone")(b.runInTransaction(function(b){return c("LSOptimisticRemoveParticipantsFromGroupThreadStoredProcedure")(c("LSFactory")(b),{contactIds:c("LSVec").ofArray([e]),threadKey:a})},"readwrite",void 0,void 0,f.id+":28"))},[e,b,a])}g["default"]=a}),98);